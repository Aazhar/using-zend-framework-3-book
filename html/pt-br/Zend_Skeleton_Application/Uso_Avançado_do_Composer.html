<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="description" content="A free and open-source book on ZF3 for beginners">
<meta name="keywords" content="zend framework,book,beginner,free">
<meta name="author" content="2019 by Oleg Krivtsov">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="../../favicon.ico" rel="shortcut icon" type="image/ico" />
<link href="../../assets/css/style.css" type="text/css" rel="stylesheet" />
<title>Uso Avançado do Composer &ndash; Using Zend Framework 3</title>
</head>
<body>
<header>
    <div class="header">
        <div class="header-body">
            <div class="book-title">
                <a href="../../index.html">Using Zend Framework 3</a>
            </div>
            <div class="book-subtitle">
                A free and open-source book on ZF3 for beginners            </div>
            <nav>
                <div class="menu">
                                        <div class="link">
                        <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/html">Home</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zf3-book-samples">Samples</a>
                    </div>
                                        <div class="link">
                        <a href="https://olegkrivtsov.github.io/zf3-api-reference/html/">Class Reference</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zend-framework-3-book">Contribute</a>
                    </div>
                    
                </div>
            </nav>
        </div>    
    </div>
</header>    
<div id="container">
<!-- Navigation -->
<div class="navigation">
    <div class="prev-chapter">
        
        <a href="../Zend_Skeleton_Application/Hosts_File.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../Zend_Skeleton_Application/Resumo.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>
        <div class="current-chapter">
        <a href="../Zend_Skeleton_Application.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">Zend Skeleton Application</span>
        </a>
    </div>
    </div>

﻿<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Using Zend Framework 3 Book - Chapter - Adaptive -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3933778336056438"
     data-ad-slot="4531860323"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!-- Chapter content -->
<div id="chapter_content">
<div class="incomplete-translation">
    Translation into this language is not yet finished. You can help this project 
    by translating the chapters and contributing your changes.
</div>

<h2 id="Uso_Avançado_do_Composer">2.12. Uso Avançado do Composer</h2>
<p>Anteriormente neste capítulo, usamos o Composer para instalar as biblioteca do Zend Framework 3.
Agora vamos mostrar brevemente alguns exemplos avançados de uso do Composer.</p>
<p>Como já sabemos, a única chave obrigatória no arquivo <code>composer.json</code> é a <code>require</code>. Esta chave
informa quais pacotes são necessários para a sua aplicativo:</p>
<pre class=""><code class="language-text">{
    "require": {
        "php": "^5.6 || ^7.0",
        "zendframework/zend-component-installer": "^1.0 || ^0.3 || ^1.0.0-dev@dev",
        "zendframework/zend-mvc": "^3.0.1",
        "zfcampus/zf-development-mode": "^3.0",
        "zendframework/zend-mvc-form": "^1.0",
        "zendframework/zend-mvc-plugins": "^1.0.1",
        "zendframework/zend-session": "^2.7.1"
    }
}
</code></pre>
<h3 id="Nomes_de_Pacotes__amp__Versões">2.12.1. Nomes de Pacotes &amp; Versões</h3>
<p>Um pacote consiste em duas partes: o nome do vendor e o nome do projeto. Por exemplo
O nome do pacote "zendframework/zend-mvc" consiste no nome do vendor "zendframework"
e o nome do projeto "zend-mvc". Você pode procurar outros pacotes de "zendframework"
através do site <a target="_blank" href="https://packagist.org/search/?q=zendframework">Packagist.org</a>
(veja a imagem 2.8 para um exemplo).</p>
<p><span class="image-wrapper">
<a target="_blank" href="../../en/images/skeleton/packagist_search.png">
<img src="../../en/images/skeleton/packagist_search.png" alt="Imagem 2.8. Você pode pesquisar pacotes no Packagist.org" /></a>
<span class="image-caption">Imagem 2.8. Você pode pesquisar pacotes no Packagist.org</span>
</span>
</p>
<p>Um pacote também possui um número de versão associada a ele. Um número de versão consiste em um número maior ou menor
número de compilação. Dentro da chave <code>require</code> podemos especificamos qual versões do pacote são desejamos.
Por exemplo, se digitarmos "^5.6" significa que podemos instalar versões maiores que "5.6", e menores que "6.0"
(Caso quisermos podemos instalar somente aqueles pacotes que não afetem a compatibilidade com versões anteriores).
Na tabela 2.2, são apresentadas possíveis maneiras de especificar versões:</p>
<div class="table-wrapper">
<div class="table-caption">Tabela 2.2. Definições de versão dos pacotes</div><table>
<thead>
<tr>
<th> <em>Exemplo</em>               </th>
<th> <em>Descrição</em>                                                                </th>
</tr>
</thead>
<tbody>
<tr>
<td>  3.0.1                   </td>
<td>  Versão exata. Neste exemplo, apenas a versão 3.0.1 pode ser instalada.     </td>
</tr>
<tr>
<td> &gt;=3.0.1                 </td>
<td> Maior ou Igual a versão poderá ser instalada.(3.0.1, 3.2.1, etc.)          </td>
</tr>
<tr>
<td> &gt;3.0.1                  </td>
<td> Versões maiores que podem ser instaladas. (3.0.2 etc.)                     </td>
</tr>
<tr>
<td> &lt;=3.0.1                 </td>
<td> Versão menor ou igual pode ser instalada (1.0, 1.5, 2.0.0 etc.)            </td>
</tr>
<tr>
<td> &lt;3.0.1                  </td>
<td> Versão inferior pode ser instalada (1.0, 1.1, 1.9, etc.)                   </td>
</tr>
<tr>
<td> !=3.0.1                 </td>
<td> Todas as versões, exceto esta versão, podem ser instaladas.                </td>
</tr>
<tr>
<td> &gt;=3.0,&lt;3.1.0            </td>
<td> Qualquer versão entre essa faixa de versões pode ser instalada.            </td>
</tr>
<tr>
<td> 3.*                                               </td>
<td> Qualquer versão com um número maior ou igual a 3 pode ser instalada                                                                                     </td>
</tr>
<tr>
<td> ~3.0                                              </td>
<td> Qualquer versão a partir de 3.0, mas menor que a próxima versão principal    (equivale a &gt;=3.0,&lt;4.0).                                                   </td>
</tr>
<tr>
<td> ^3.0                                              </td>
<td> Qualquer versão a partir de 3.0, mas menor que a próxima versão principal    (equivalente a&gt; = 3.0, &lt;4.0). Semelhante ao <code>~3.0</code>.                       </td>
</tr>
</tbody>
</table>
</div>
<h3 id="Instalando_e_atualizando_os_pacotes">2.12.2. Instalando e atualizando os pacotes</h3>
<p>Nós vimos como usar o comando <code>php composer.phar install</code> para instalar nossas dependências.
Assim que você executa o comando, o Composer vai, baixar e instalar as dependências
para o seu subdiretório <code>vendor</code>.</p>
<blockquote class="notquote question" data-type="question"><p> <strong> É seguro instalar dependências com o Composer? </strong></p>
<p> Bem, algumas pessoas podem ter medo receio do estilo de gerenciamento do Composer,
 Porque acham que alguém pode atualizar todo o sistema por engano ou até intencionalmente,
 fazendo com que o aplicativo da web seja
 pare de funcionar . Note que o Composer <em>nunca</em> instala estes
 arquivos no sistema, em vez disso, instala-os no diretório <code>APP_DIR/vendor/</code>.</p>
</blockquote><p>Agora suponhamos que que após certo tempo novas atualizações de segurança para seus pacotes de dependência sejam liberadas.
Você vai querer atualizar seus pacotes para manter seu site seguro. Você pode fazer isso digitando o seguinte:</p>
<p><code>php composer.phar update</code></p>
<p>Se você deseja atualizar apenas uma única dependência, digite seu nome da seguinte forma:</p>
<p><code>php composer.phar update zendframework/zend-mvc</code></p>
<p>Após o comando <code>update</code>, seu arquivo <code>composer.lock</code> será atualizado também.</p>
<blockquote class="notquote question" data-type="question"><p> <strong> O que faço se eu quiser voltar para a versão anterior do pacote? </strong></p>
<p> Se o procedimento de atualização resultou em problemas indesejados com o seu sistema, você pode reverter
 revertendo as mudanças do seu arquivo <code>composer.lock</code> digitando  comando <code>install</code> novamente.
A  alterações no <code>composer.lock</code> é fácil se você usar um sistema de controle de versão, como o GIT ou o SVN.
Se você não usa um sistema de controle de versão, faça um backup do <code>composer.lock</code> antes de atualizar.</p>
</blockquote><h3 id="Adicionando_uma_nova_dependência">2.12.3. Adicionando uma nova dependência</h3>
<p>Se você quiser adicionar nova dependência a sua aplicação, você pode editar <code>composer.json</code>
manualmente, ou execute o comando <code>require</code>. Por exemplo, para instalar o módulo Doctrine ORM em seu site
site (para adicionar o pacote "doctrine/doctrine-module" a sua aplicação), digite o seguinte:</p>
<p><code>php composer.phar require doctrine/doctrine-module 2.*</code></p>
<p>O comando acima edita o arquivo <code>composer.json</code> e faz o download e instala o pacote. Nós vamos usar este comando
mais adiante no capítulo <a  href="#doctrine">Gerenciando Banco de Dados com Doctrine</a>, quando estivermos familiarizado
com o banco de dados.</p>
<h3 id="Virtual_Packages">2.12.4. Virtual Packages</h3>
<p>O Composer pode ser usado para exigir algumas funcionalidades do seu sistema. Você já viu
como precisamos "php:^5.6". O pacote PHP é uma virtual Package representando o próprio PHP.
Você também pode exigir outras coisas, como extensões PHP (veja a tabela 2.3 abaixo).</p>
<div class="table-wrapper">
<div class="table-caption">Tabela 2.3. Virtual Composer Packages</div><table>
<thead>
<tr>
<th> <em>Exemplo</em>               </th>
<th> <em>Descrição</em>                                                                </th>
</tr>
</thead>
<tbody>
<tr>
<td>  "php":"^5.6"            </td>
<td>  Requer a versão do PHP maior ou igual a 5.6 porém menor que a 6.0.         </td>
</tr>
<tr>
<td> ext-dom, ext-pdo-mysql  </td>
<td> Requer as extensões PHP DOM e PDO MySQL.                                   </td>
</tr>
<tr>
<td> lib-openssl             </td>
<td> Requer a blibioteca OpenSSL.                                               </td>
</tr>
</tbody>
</table>
</div>
<p>Você pode executar o comando <code>php composer.phar show --platform</code> para exibir a lista de pacotes disponíveis
para a sua máquina.</p>
<h3 id="Composer_e_Sistemas_de_Controle_de_Versão">2.12.5. Composer e Sistemas de Controle de Versão</h3>
<p>Se você estiver usando um sistema de controle de versão (como o Git), deve está curioso
sobre o que deve ser armazenado no Git: apenas o codigo da sua aplicação ou o código do seu aplicativo
mais todas as dependências que foram instaladas pelo Composer no diretório <code>APP_DIR/vendor</code>?</p>
<p>Geralmente, não é recomendado armazenar suas dependências do Composer
sob controle de versão, porque isso pode tornar seu repositório muito grande e lento para fazer check-out.
Em vez disso você deve armazenar seu arquivo <code>composer.lock</code> no seu controle de versão. O arquivo
<code>composer.lock</code> garante que instalem as mesmas versões de dependências que você possuia.
Isso é útil em equipes de desenvolvimento com mais de um desenvolvedor, porque todos
os desenvolvedores devem ter o mesmo código para evitar problemas indesejados com o ambiente
configuração incorreta.</p>
<blockquote class="notquote question" data-type="question"><p> <em>E se alguma dependência se tornar obsoleta ou for removida da Packagist.org?</em></p>
<p> Bem, a possibilidade de remoção de pacotes é mínima. Todos os pacotes são gratuitos e de código aberto,
 e a comunidade de usuários sempre pode restaurar a dependência, mesmo se ela for removida do packagist.
 O mesmo conceito de instalação de dependência é usado no Linux (lembra APT ou RPM manager?),
 você já viu algum pacote Linux perdido?</p>
</blockquote><p>Mas pode haver situações em que você <em>deve</em> armazenar algumas bibliotecas dependentes sob
controle de versão:</p>
<ul>
<li><p>Se você tiver feito uma alterações no código de terceiros. Por exemplo, suponha
você tem que consertar um bug em uma biblioteca, e você não pode esperar pelo fornecedor da biblioteca
para corrigi-lo para você (ou se o fornecedor da biblioteca não puder consertar o bug). Nesse caso,
você deve colocar o código da biblioteca sob controle de versão para garantir o seu
as mudanças não serão perdidas.</p>
</li>
<li><p>Se você escreveu um módulo ou biblioteca reutilizável e deseja armazená-lo no `vendor'
sem publicá-lo em <em>Packagist.org</em>.</p>
</li>
<li><p>Se você quiser uma garantia de 100% de que um pacote não será perdido.
Embora o risco seja mínimo, para algumas aplicações é essencial ser autônomo e não depender da
disponibilidade do pacote no <em>Packagist.org</em>.</p>
</li>
</ul>
        
</div>

<!-- Ads -->
<div id="ads-chapter-bottom">
<div>
﻿<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Using Zend Framework 3 Chapter - Bottom - Adaptive -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3933778336056438"
     data-ad-slot="1546211126"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
</div>
    
<!-- Navigation -->
<div class="navigation">
        <div class="current-chapter">
        <a href="../Zend_Skeleton_Application.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">Zend Skeleton Application</span>
        </a>
    </div>
        <div class="prev-chapter">
        
        <a href="../Zend_Skeleton_Application/Hosts_File.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../Zend_Skeleton_Application/Resumo.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>        
</div>

<div id="disqus_thread"></div>

        
</div>
<footer>
    <div class="footer">
        <div class="footer-body">
            <div class="copyright">
                Copyright &copy; 2019 by Oleg Krivtsov            </div>
            <div class="footer-menu">
                                <div class="footer-link">
                    <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/legal/terms-and-conditions.html">Terms &amp; Conditions</a>
                </div>
                                <div class="footer-link">
                    <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/legal/copyright-policy.html">Copyright Policy</a>
                </div>
                                <div class="footer-link">
                    <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/legal/privacy-policy.html">Privacy Policy</a>
                </div>
                            </div>
            <div class="generated-by">
                Generated using <a href="https://github.com/olegkrivtsov/openbook">OpenBook</a>
            </div>
        </div>    
    </div>
</footer>

<a href="#0" class="cd-top">Top</a>

<script src="../../assets/js/jquery.min.js"></script>
<script src="../../assets/js/loadCSS.js"></script>
<script src="../../assets/js/popup.js"></script>

<script src="../../assets/js/prism.js"></script>

<script>
var disqus_config = function () {
this.page.url = window.location.href; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = ''; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//using-zend-framework-3-book.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
<script>
loadCSS("../../assets/css/prism.css");
</script>

<script>
jQuery(document).ready(function($){
    // browser window scroll (in pixels) after which the "back to top" link is shown
    var offset = 300,
    //browser window scroll (in pixels) after which the "back to top" link opacity is reduced
    offset_opacity = 1200,
    //duration of the top scrolling animation (in ms)
    scroll_top_duration = 700,
    //grab the "back to top" link
    $back_to_top = $('.cd-top');

    //hide or show the "back to top" link
    $(window).scroll(function(){
            ( $(this).scrollTop() > offset ) ? $back_to_top.addClass('cd-is-visible') : $back_to_top.removeClass('cd-is-visible cd-fade-out');
            if( $(this).scrollTop() > offset_opacity ) { 
                    $back_to_top.addClass('cd-fade-out');
            }
    });

    //smooth scroll to top
    $back_to_top.on('click', function(event){
            event.preventDefault();
            $('body,html').animate({
                    scrollTop: 0 ,
                    }, scroll_top_duration
            );
    });

});
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-80824388-1', 'auto');
  ga('send', 'pageview');

</script>

</body>
</html>    

