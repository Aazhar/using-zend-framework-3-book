<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="description" content="A free, read-frendly and open-source book on ZF3">
<meta name="keywords" content="zend framework,book,beginner,free">
<meta name="author" content="2018 by Oleg Krivtsov">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="../../favicon.ico" rel="shortcut icon" type="image/ico" />
<link href="../../assets/css/style.css" type="text/css" rel="stylesheet" />
<title>Um exemplo de site PHP &ndash; Using Zend Framework 3</title>
</head>
<body>
<header>
    <div class="header">
        <div class="header-body">
            <div class="book-title">
                <a href="../../index.html">Using Zend Framework 3</a>
            </div>
            <div class="book-subtitle">
                A free, read-frendly and open-source book on ZF3            </div>
            <nav>
                <div class="menu">
                                        <div class="link">
                        <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/html">Home</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zf3-book-samples">Samples</a>
                    </div>
                                        <div class="link">
                        <a href="https://olegkrivtsov.github.io/zf3-api-reference/html/">Class Reference</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zend-framework-3-book">Contribute</a>
                    </div>
                    
                </div>
            </nav>
        </div>    
    </div>
</header>    
<div id="container">
<!-- Navigation -->
<div class="navigation">
    <div class="prev-chapter">
        
        <a href="../Introdução_ao_Zend_Framework_3/O_que_é_o_Zend_Framework_3__.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../Introdução_ao_Zend_Framework_3/Licença.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>
        <div class="current-chapter">
        <a href="../Introdução_ao_Zend_Framework_3.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">Introdução ao Zend Framework 3</span>
        </a>
    </div>
    </div>

﻿<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Using Zend Framework 3 Book - Chapter - Adaptive -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3933778336056438"
     data-ad-slot="4531860323"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!-- Chapter content -->
<div id="chapter_content">
<div class="incomplete-translation">
    Translation into this language is not yet finished. You can help this project 
    by translating the chapters and contributing your changes.
</div>

<h2 id="Um_exemplo_de_site_PHP">1.2. Um exemplo de site PHP</h2>
<p>Para demonstrar como é difícil escrever um site <em> sem </em> um framework, aqui nós
vamos escrever um site muito simples, composto por três páginas HTML: <em> Home </em>, <em> Login </em> e <em> Logout </em>.
Para este exemplo, não usaremos nenhuma estrutura e tentaremos usar apenas PHP "puro".</p>
<blockquote class="notquote information" data-type="information"><p> Não fique confuso - escrever um site com framework também pode ser difícil, mas
 com um framework, você fará isso de maneira consistente e segura.</p>
</blockquote><h3 id="Home_Page">1.2.1. Home Page</h3>
<blockquote class="notquote information" data-type="information"><p> Quando você escreve um site em PHP, você coloca seu código em um arquivo com a extensão <em> .php </em>. Este arquivo é chamado
   um script PHP *.</p>
</blockquote><p>Primeiro, vamos implementar a página <em> Home </em> do site. Para fazer isso, você deve criar o arquivo <em> index.php </em> no seu Apache ou
no seu diretório raiz e coloque o seguinte código:</p>
<blockquote class="notquote tip" data-type="tip"><p> Para entender o código abaixo, você precisa ter alguma experiência com PHP. Se você não tem experiência
 com PHP, caso tenha duvidas ou necessite de algum tutorial de PHP,
 recomendamos <a target="_blank" href="http://www.w3schools.com/php/">w3schools.com</a>.</p>
</blockquote><pre class=""><code class="language-php">&lt;?php 
// index.php
session_start();

// If user is logged in, retrieve identity from session.
$identity = null;
if (isset($_SESSION['identity'])) {
    $identity = $_SESSION['identity'];
}
?&gt;

&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Home page&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;Home&lt;/h1&gt;
        &lt;?php if ($identity==null): ?&gt;
        &lt;a href="login.php"&gt;Sign in&lt;/a&gt;
        &lt;?php else: ?&gt;
        &lt;strong&gt;Welcome, &lt;?= $identity ?&gt;&lt;/strong&gt; &lt;a href="logout.php"&gt;Sign out&lt;/a&gt;
        &lt;?php endif; ?&gt;
        
        &lt;p&gt;
            This is a simple website to demonstrate the advantages of a PHP framework
            and disadvantages of "pure" PHP.
        &lt;/p&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>Se você agora digitar "http: //localhost/index.php" no seu navegador (como Google Chrome ou Firefox),
deve ver a página como abaixo:</p>
<p><span class="image-wrapper">
<a target="_blank" href="../../en/images/intro/simple_home_page.png">
<img src="../../en/images/intro/simple_home_page.png" alt="Home page" /></a>
<span class="image-caption">Home page</span>
</span>
</p>
<h3 id="Login_Page">1.2.2. Login Page</h3>
<p>Em seguida, vamos implementar a página <em> Login </em>. Essa página teria um formulário com os campos <em> E-mail </em>
e <em> Senha </em> . Depois que o usuário envia o formulário, ele será autenticado e vamos salvar os seus dados na
na sessão do PHP. O Código ficaria:</p>
<pre class=""><code class="language-php">&lt;?php 
// login.php
session_start();

// If user is logged in, redirect him to index.php
if (isset($_SESSION['identity'])) {
    header('Location: index.php');
    exit;
}

// Check if form is submitted.
$submitted = false;
if ($_SERVER['REQUEST_METHOD']=='POST') {
    
    $submitted = true;
    
    // Extract form data.
    $email = $_POST['email'];
    $password = $_POST['password'];
    
    // Authenticate user.
    $authenticated = false;
    if ($email=='admin@example.com' &amp;&amp; $password=='Secur1ty') {
        $authenticated = true;
        
        // Save identity to session.
        $_SESSION['identity'] = $email;
        
        // Redirect the user to index.php.
        header('Location: index.php');
        exit;
    }
}
?&gt;

&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Login page&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;Sign in&lt;/h1&gt;
        &lt;?php if ($submitted &amp;&amp; !$authenticated): ?&gt;
            &lt;div class="alert"&gt;
                Invalid credentials.
            &lt;/div&gt;
        &lt;?php endif; ?&gt;
        &lt;form name="login-form" action="/login.php" method="POST"&gt;
            &lt;label for="email"&gt;E-mail&lt;/label&gt;
            &lt;input type="text" name="email"&gt;
            &lt;br&gt;
            &lt;label for="password"&gt;Password&lt;/label&gt;
            &lt;input type="password" name="password"&gt;
            &lt;br&gt;
            &lt;input type="submit" name="submit" value="Sign In"&gt;
        &lt;/form&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>Se você abrir o URL "http: //localhost/login.php" em seu navegador, você vai ver algo como:</p>
<p><span class="image-wrapper">
<a target="_blank" href="../../en/images/intro/simple_login_page.png">
<img src="../../en/images/intro/simple_login_page.png" alt="Login page" /></a>
<span class="image-caption">Login page</span>
</span>
</p>
<blockquote class="notquote tip" data-type="tip"><p> Para efetuar login, use o <code>admin@example.com</code> e <code>Secur1ty</code> como seu E-mail e senha, respectivamente.</p>
</blockquote><h3 id="Logout_Page">1.2.3. Logout Page</h3>
<p>E finalmente, vamos implementar a página <em> Logout </em> que irá limpar os dados do usuário e da sessão:</p>
<pre class=""><code class="language-php">&lt;?php 
// logout.php
session_start();

unset($_SESSION['identity']);
header('Location: index.php');
exit;
</code></pre>
<blockquote class="notquote tip" data-type="tip"><p> O código completo deste site pode ser encontrado em
 <a target="_blank" href="https://github.com/olegkrivtsov/using-zf3-book-samples/tree/master/purephp">Pure PHP</a> exemplo está incluso com este livro.</p>
</blockquote><h3 id="Revisando_o_Código">1.2.4. Revisando o Código</h3>
<p>Os scripts acima não são apenas um exemplo típico de um site PHP "puro". É também um exemplo de
como você <em> não deve </em> escrever seus sites (mesmo sites simples). O que há de errado nisso?</p>
<ol>
<li><p>Os scripts <em> index.php </em> e <em> login.php </em> tendem a juntar o código em um único arquivo.
Você não tem nenhuma separação, o que torna o seu código muito complexo.
Intuitivamente, você entende que seria
porém é mais conveniente dividir o código responsável pela autenticação do usuário e o código
responsável pela apresentação (renderização HTML).</p>
</li>
<li><p>As URLs das suas páginas parecem feias (por exemplo, "http: //localhost/index.php"). Nós seria melhor esconder
essa extensão .php em tudo. E o que acontece quando um usuário da web tenta visitar uma página que não existe?
Não seria melhor redirecionar o usuário para uma página de erro nesse caso.</p>
</li>
<li><p>E se este site aumentar de tamanho? Como você vai organizar o seu código? Um script PHP por página da web?
E se você quiser reutilizar alguns dos seus scripts PHP em outros sites sem alterações? Intuitivamente
Você pode entender que seria útil organizar o código em algum tipo de <em> módulos </em> reutilizáveis.</p>
</li>
<li><p>Os scripts <em> index.php </em> e <em> login.php </em> contêm HTML comum. Por que copiamos e colamos
este layout comum em todos os scripts PHP? Não seria melhor reutilizar o mesmo layout padrão em todos
(ou quase todas) as páginas.</p>
</li>
</ol>
<ol>
<li><p>O script <em> login.php </em> tem problemas de segurança, porque não implementamos nenhuma validação do ​​POST.
A sessão do PHP também está sujeita a ataques hackers. E o script <em> login.php </em> PHP está localizado no
diretório raiz do documento, o que não é muito seguro (seria melhor colocá-lo em um local não acessível
para usuários da web). O <em> index.php </em> também é inseguro, porque nós não filtramos a saída do PHP (ele está sujeito a ataques XSS).</p>
</li>
<li><p>Esses scripts não usam classes PHP. Encapsulando funcionalidade em classes em teoria faria
o código bem estruturado e fácil de  dar suporte.</p>
</li>
<li><p>Nesses scripts, você precisa escrever sua própria implementação de autenticação do usuário (e assim por diante).
Em vez de reinventamos a roda por que não usar uma biblioteca bem projetada para isso?</p>
</li>
</ol>
<p>Os problemas acima são facilmente resolvidos quando você escreve um site dentro de um framework (como o Zend Framework 3):</p>
<ol>
<li><p>No ZF3, você usa o padrão de projeto <em> Model-View-Controller </em>, dividindo seu código PHP em models
(o código responsável pela autenticação), views (o código responsável pela renderização de HTML)
e controllers (o código responsável por recuperar as variáveis ​​do POST).</p>
</li>
<li><p>O sistema de rotas do  ZF3  permite deixar as URLS mais profissionais ocultando a extensões .php. Todas as URLS seguem regras
estritas. Se um usuário tentar ver uma página não existente, ele será automaticamente
redirecionado para uma página de erro padrão.</p>
</li>
<li><p>No ZF3, você pode usar o conceito de <em> module </em>. Isso permite convenientemente separar seus  models, views and
   controllers em unidade autônoma (module) e reutilize facilmente essa unidade em outro projeto.</p>
</li>
<li><p>No ZF3, você pode definir um modelo padrão para visualização <em> layout </em> e reutilizá-lo em todas (ou na maioria) páginas da web.</p>
</li>
<li><p>O ZF3 fornece vários recursos de segurança, como filters e validators, criptografia
algoritmos e assim por diante. Em um site da ZF3, apenas o <em> index.php </em> é acessível para usuários da web, todos os outros scripts PHP
estão localizados fora do diretório raiz de documentos do Apache.</p>
</li>
<li><p>Em um site da ZF3, você coloca seu código em classes, o que o torna bem organizado.</p>
</li>
<li><p>O ZF3 fornece muitos componentes que você pode usar em seu site: existem componentes para autenticação, um componente
para trabalhar com formulários e assim por diante.</p>
</li>
</ol>
<blockquote class="notquote tip" data-type="tip"><p> Agora você pode ter alguma idéia das vantagens do Zend Framework 3 e do que ele pode fazer por você. Na próxima
   seções, descreveremos o ZF3 em mais detalhes.</p>
</blockquote>        
</div>

<!-- Ads -->
<div id="ads-chapter-bottom">
<div>
﻿<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Using Zend Framework 3 Chapter - Bottom - Adaptive -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3933778336056438"
     data-ad-slot="1546211126"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
</div>
    
<!-- Navigation -->
<div class="navigation">
        <div class="current-chapter">
        <a href="../Introdução_ao_Zend_Framework_3.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">Introdução ao Zend Framework 3</span>
        </a>
    </div>
        <div class="prev-chapter">
        
        <a href="../Introdução_ao_Zend_Framework_3/O_que_é_o_Zend_Framework_3__.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../Introdução_ao_Zend_Framework_3/Licença.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>        
</div>

<div id="disqus_thread"></div>

        
</div>
<footer>
    <div class="footer">
        <div class="footer-body">
            <div class="copyright">
                Copyright &copy; 2018 by Oleg Krivtsov            </div>
            <div class="footer-menu">
                                <div class="footer-link">
                    <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/legal/terms-and-conditions.html">Terms &amp; Conditions</a>
                </div>
                                <div class="footer-link">
                    <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/legal/copyright-policy.html">Copyright Policy</a>
                </div>
                                <div class="footer-link">
                    <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/legal/privacy-policy.html">Privacy Policy</a>
                </div>
                            </div>
            <div class="generated-by">
                Generated using <a href="https://github.com/olegkrivtsov/openbook">OpenBook</a>
            </div>
        </div>    
    </div>
</footer>

<a href="#0" class="cd-top">Top</a>

<script src="../../assets/js/jquery.min.js"></script>
<script src="../../assets/js/loadCSS.js"></script>
<script src="../../assets/js/popup.js"></script>

<script src="../../assets/js/prism.js"></script>

<script>
var disqus_config = function () {
this.page.url = window.location.href; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = ''; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//using-zend-framework-3-book.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
<script>
loadCSS("../../assets/css/prism.css");
</script>

<script>
jQuery(document).ready(function($){
    // browser window scroll (in pixels) after which the "back to top" link is shown
    var offset = 300,
    //browser window scroll (in pixels) after which the "back to top" link opacity is reduced
    offset_opacity = 1200,
    //duration of the top scrolling animation (in ms)
    scroll_top_duration = 700,
    //grab the "back to top" link
    $back_to_top = $('.cd-top');

    //hide or show the "back to top" link
    $(window).scroll(function(){
            ( $(this).scrollTop() > offset ) ? $back_to_top.addClass('cd-is-visible') : $back_to_top.removeClass('cd-is-visible cd-fade-out');
            if( $(this).scrollTop() > offset_opacity ) { 
                    $back_to_top.addClass('cd-fade-out');
            }
    });

    //smooth scroll to top
    $back_to_top.on('click', function(event){
            event.preventDefault();
            $('body,html').animate({
                    scrollTop: 0 ,
                    }, scroll_top_duration
            );
    });

});
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-80824388-1', 'auto');
  ga('send', 'pageview');

</script>

</body>
</html>    

