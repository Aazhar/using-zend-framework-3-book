<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="description" content="A free, read-frendly and open-source book on ZF3">
<meta name="keywords" content="zend framework,book,beginner,free">
<meta name="author" content="2018 by Oleg Krivtsov">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="../../favicon.ico" rel="shortcut icon" type="image/ico" />
<link href="../../assets/css/style.css" type="text/css" rel="stylesheet" />
<title>Usage avancé de Composer &ndash; Using Zend Framework 3</title>
</head>
<body>
<header>
    <div class="header">
        <div class="header-body">
            <div class="book-title">
                <a href="../../index.html">Using Zend Framework 3</a>
            </div>
            <div class="book-subtitle">
                A free, read-frendly and open-source book on ZF3            </div>
            <nav>
                <div class="menu">
                                        <div class="link">
                        <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/html">Home</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zf3-book-samples">Samples</a>
                    </div>
                                        <div class="link">
                        <a href="https://olegkrivtsov.github.io/zf3-api-reference/html/">Class Reference</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zend-framework-3-book">Contribute</a>
                    </div>
                    
                </div>
            </nav>
        </div>    
    </div>
</header>    
<div id="container">
<!-- Navigation -->
<div class="navigation">
    <div class="prev-chapter">
        
        <a href="../L_Application_Skeleton_de_Zend/Les_fichiers_Hosts.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../L_Application_Skeleton_de_Zend/Résumé.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>
        <div class="current-chapter">
        <a href="../L_Application_Skeleton_de_Zend.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">L'Application Skeleton de Zend</span>
        </a>
    </div>
    </div>

﻿<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Using Zend Framework 3 Book - Chapter - Adaptive -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3933778336056438"
     data-ad-slot="4531860323"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!-- Chapter content -->
<div id="chapter_content">
<div class="incomplete-translation">
    Translation into this language is not yet finished. You can help this project 
    by translating the chapters and contributing your changes.
</div>

<h2 id="Usage_avancé_de_Composer">2.12. Usage avancé de Composer</h2>
<p>Précédemment, nous avons utilisé Composer pour installer la bibliothèque Zend Framework 3. 
Décrivons maintenant brièvement quelques exemples d'utilisation avancés de Composer.</p>
<p>Comme nous le savons déjà, la seule clé requise dans le fichier <code>composer.json</code> est <code>require</code>. Cette clé 
indique quels sont les paquetages requis par votre application :</p>
<pre class=""><code class="language-text">{
    "require": {
        "php": "^5.6 || ^7.0",
        "zendframework/zend-component-installer": "^1.0 || ^0.3 || ^1.0.0-dev@dev",
        "zendframework/zend-mvc": "^3.0.1",
        "zfcampus/zf-development-mode": "^3.0",
        "zendframework/zend-mvc-form": "^1.0",
        "zendframework/zend-mvc-plugins": "^1.0.1",
        "zendframework/zend-session": "^2.7.1"
    }
}
</code></pre>
<h3 id="Noms_des_Packages_et_Versions">2.12.1. Noms des Packages et Versions</h3>
<p>Un nom de package se compose de deux parties : le nom du fournisseur (vendor) et le nom du projet. 
Par exemple, le nom du paquet "zendframework/zend-mvc" se compose du nom du fournisseur "zendframework" 
et du nom du projet "zend-mvc". Vous pouvez rechercher d'autres packages du fournisseur "zendframework" 
sur le site <a target="_blank" href="https://packagist.org/search/?q=zendframework">Packagist.org</a> (voir la figure 2.8 pour un exemple).</p>
<p><span class="image-wrapper">
<a target="_blank" href="../../en/images/skeleton/packagist_search.png">
<img src="../../en/images/skeleton/packagist_search.png" alt="Figure 2.8. Vous pouvez rechercher des paquets sur Packagist.org " /></a>
<span class="image-caption">Figure 2.8. Vous pouvez rechercher des paquets sur Packagist.org </span>
</span>
</p>
<p>Un package a également un numéro de version associé. Un numéro de version se compose d'un numéro majeur, 
d'un numéro mineur, d'un numéro de build facultatif et d'un suffixe de stabilité facultatif 
(par exemple b1, rc1). Dans la clé <code>require</code>, nous spécifions quelles versions du paquet nous acceptons. 
Par exemple, "^5.6" signifie que nous pouvons installer des versions supérieures à "5.6", mais inférieures 
à "6.0" (ie que nous ne pouvons installer que les paquets qui ne cassent pas la compatibilité descendante). 
Dans le tableau 2.2, les manières possibles de spécifier les versions acceptables sont présentées:</p>
<div class="table-wrapper">
<div class="table-caption">Table 2.2.  Définitions des versions de Package</div><table>
<thead>
<tr>
<th> <em>Exemple</em>    </th>
<th> <em>Description</em>                                                              </th>
</tr>
</thead>
<tbody>
<tr>
<td>  3.0.1                   </td>
<td>  Version exacte. Dans cet exemple, seule la version 3.0.1 peut être installée.   </td>
</tr>
<tr>
<td> &gt;=3.0.1                 </td>
<td> Une version supérieure ou égale peut être installée (3.0.1, 3.2.1, etc.)             </td>
</tr>
<tr>
<td> &gt;3.0.1                  </td>
<td> Une version ultérieure peut être installée (3.0.2 etc.)                              </td>
</tr>
<tr>
<td> &lt;=3.0.1                 </td>
<td> Une version inférieure ou égale peut être installée (1.0, 1.5, 2.0.0 etc.)             </td>
</tr>
<tr>
<td> &lt;3.0.1                  </td>
<td> Une version strictement inférieure peut être installée (1.0, 1.1, 1.9, etc.)                       </td>
</tr>
<tr>
<td> !=3.0.1                 </td>
<td> Toutes les versions sauf cette version peuvent être installées.                         </td>
</tr>
<tr>
<td> &gt;=3.0,&lt;3.1.0            </td>
<td> Toute version appartenant à cette gamme de versions peut être installée.          </td>
</tr>
<tr>
<td> 3.*                     </td>
<td> Toute version ayant un numéro majeur égal à 3 peut être installée (peu importe le numéro mineur).                                                               </td>
</tr>
<tr>
<td> ~3.0                    </td>
<td> Toute version à partir de 3.0, mais inférieure à la version majeure suivante (équivalent de &gt; 3.0, &lt;4.0).                                                </td>
</tr>
<tr>
<td> ^3.0                    </td>
<td> Toute version à partir de la version 3.0, mais inférieure à la version majeure suivante (équivalente à &gt;= 3.0, &lt;4.0). Semblable à ~3.0, mais il se rapproche de la version sémantique, et permettra toujours des mises à jour sans rupture.           </td>
</tr>
</tbody>
</table>
</div>
<h3 id="Installation_et_mise_à_jour_des_paquets">2.12.2. Installation et mise à jour des paquets</h3>
<p>Nous avons vu comment utiliser la commande <code>php composer.phar install</code> pour installer nos dépendances. 
Dès que vous appelez cette commande, Composer trouve, télécharge et installe les dépendances dans votre 
sous-dossier <code>vendor</code>.</p>
<blockquote class="notquote question" data-type="question"><p> <strong>L'instalation des dépendances avec Composer est elle sure ?</strong></p>
<p> Eh bien, certaines personnes peuvent avoir peur des gestionaires des dépendances du style Composer 
 car elles pensent que quelqu'un peut mettre à jour les dépendances du système par erreur ou 
 intentionnellement, provoquant la rupture de l'application. Notez que Composer n'installe jamais ces 
 systèmes à la place de vos fichiers, mais les installe dans votre répertoire <code>APP_DIR/vendor/</code>.</p>
</blockquote><p>Après l'installation, Composer crée également le fichier <code>APP_DIR/composer.lock</code>. Ce fichier contient 
maintenant les versions réelles des packages installés. Si vous réexécutez la commande d'installation, 
Composer intérogera le fichier <code>composer.lock</code>, vérifiera les dépendances déjà installées et, comme tous 
les paquets sont déjà installés et à jour, il se fermera simplement sans rien faire.</p>
<p>Supposons maintenant que, à un moment donné, de nouvelles mises à jour de sécurité pour vos paquets de 
dépendances soient publiées. Vous voudrez mettre à jour vos paquets pour garder votre site web sécurisé. 
Vous pouvez le faire en tapant ce qui suit :</p>
<p><code>php composer.phar update</code></p>
<p>Si vous souhaitez mettre à jour une seule dépendance, tapez son nom comme suit :</p>
<p><code>php composer.phar update zendframework/zend-mvc</code></p>
<p>Après la commande <code>update</code>, votre fichier <code>composer.lock</code> sera également mis à jour.</p>
<blockquote class="notquote question" data-type="question"><p> <strong>Que faire si je souhaite revenir à une version antérieure du package ?</strong></p>
<p> Si la procédure de mise à jour a provoqué des problèmes indésirables sur votre système, vous pouvez 
 revenir en arrière en rétablissant les modifications apportées à votre fichier <code>composer.lock</code> et en 
 réexécutant la commande d'installation. La restauration des modifications de <code>composer.lock</code> est facile 
 si vous utilisez un système de contrôle de version, comme GIT ou SVN. Si vous n'utilisez pas de système 
 de contrôle de version, faites une copie de sauvegarde de <code>composer.lock</code> avant la mise à jour.</p>
</blockquote><h3 id="Ajouter_une_nouvelle_dépendance">2.12.3. Ajouter une nouvelle dépendance</h3>
<p>Si vous souhaitez ajouter une nouvelle dépendance à l'application, vous pouvez éditer <code>composer.json</code> 
manuellement ou taper une commande <code>require</code>. Par exemple, pour installer le module Doctrine ORM sur votre 
site (pour ajouter le package "doctrine/doctrine-module" aux dépendances de l'application), tapez ce qui suit :</p>
<p><code>php composer.phar require doctrine/doctrine-module 2.*</code></p>
<p>La commande ci-dessus édite le fichier <code>composer.json</code> et télécharge et installe le paquet. 
Nous utiliserons cette commande plus tard dans le chapitre <a  href="#doctrine">Managing Database with Doctrine</a>, 
lorsque nous nous familiariserons avec la gestion de base de données.</p>
<h3 id="Paquets_Virtuels">2.12.4. Paquets Virtuels</h3>
<p>Composer peut être utilisé pour exiger certaines fonctionnalités nécessaires à votre système. 
Vous avez déjà vu que nous avions besoin de "php:^5.6". Le paquet PHP est un paquet virtuel représentant 
PHP lui-même. Vous pouvez également exiger d'autres choses, comme les extensions PHP (voir le tableau 2.3 
ci-dessous).</p>
<div class="table-wrapper">
<div class="table-caption">Table 2.3. Paquets Virtuels Composer</div><table>
<thead>
<tr>
<th> <em>Exemple</em>    </th>
<th> <em>Description</em>                                                              </th>
</tr>
</thead>
<tbody>
<tr>
<td>  "php":"^5.6"            </td>
<td>  Requiert une version PHP supérieure ou égale à 5.6, mais inférieure à 6.0.         </td>
</tr>
<tr>
<td> ext-dom, ext-pdo-mysql  </td>
<td> Nécessite les extensions PHP DOM et PDO MySQL                                   </td>
</tr>
<tr>
<td> lib-openssl             </td>
<td> Nécessite la bibliothèque OpenSSL                                                    </td>
</tr>
</tbody>
</table>
</div>
<p>Vous pouvez utiliser la commande <code>php composer.phar show --platform</code> pour afficher la liste des packages 
virtuels disponibles pour votre machine.</p>
<h3 id="Composer_et_les_gestionnaires_de_version">2.12.5. Composer et les gestionnaires de version</h3>
<p>Si vous utilisez un système de contrôle de version (comme Git), vous serez curieux de savoir ce qui devrait 
être stocké dans Git : seulement le code de votre application ou votre code plus toutes les 
dépendances installées par Composer dans <code>APP_DIR/vendor</code> ?</p>
<p>En général, il n'est pas recommandé de stocker vos dépendances Composer dans le gestionnaire de version 
car cela peut rendre votre dossier très gros et trop lent à extraire et à brancher. Au lieu de cela, vous 
devez stocker votre fichier <code>composer.lock</code> sous le contrôle de version. Le fichier <code>composer.lock</code> 
garantit que tout le monde va installer les mêmes versions de dépendances que vous. 
Ce qui est utile dans les équipes de développement ayant plus d'un développeur car tous les développeurs 
doivent avoir le même code pour éviter les problèmes non désirés avec une mauvaise configuration de 
l'environnement.</p>
<blockquote class="notquote question" data-type="question"><p> <strong>Et si une dépendance était déclarée obsolète et retirée de Packagist.org ?</strong></p>
<p> Eh bien, la possibilité de retrait du paquet est minimale. Tous les paquets sont libres et open-source 
 et la communauté d'utilisateurs peut toujours restaurer la dépendance même si elle est retirée de 
 packagist. En passant, le même concept d'installation de dépendances est utilisé sous Linux 
 (souvenez-vous du gestionnaire APT ou RPM?), est ce que quelqu'un a déjà perdu un paquet Linux ?</p>
</blockquote><p>Mais il peut arriver que vous deviez stocker certaines bibliothèques dépendantes sous le contrôle de version :</p>
<ul>
<li><p>Si vous devez apporter des modifications personnalisées au code tiers. Par exemple, supposons que vous 
deviez corriger un bug dans une bibliothèque et que vous ne pouvez pas attendre que le fournisseur de la 
bibliothèque le corrige pour vous (ou si le fournisseur de la bibliothèque ne peut pas corriger le bug). 
Dans ce cas, vous devez placer le code de la bibliothèque sous contrôle de version pour vous assurer que 
vos modifications personnalisées ne seront pas perdues.</p>
</li>
<li><p>Si vous avez écrit un module ou une bibliothèque réutilisable et souhaitez le stocker dans le répertoire 
du fournisseur sans le publier sur <em>Packagist.org</em>. Étant donné que vous n'avez pas la possibilité 
d'installer ce code à partir de Packagist, vous devez le stocker sous le contrôle de version.</p>
</li>
<li><p>Si vous voulez une garantie à 100% qu'un paquet tiers ne sera pas perdu. Bien que le risque soit minime, 
pour certaines applications, il est essentiel d'être autonome et de ne pas dépendre de la disponibilité 
des paquets sur <em>Packagist.org</em>.</p>
</li>
</ul>
        
</div>

<!-- Ads -->
<div id="ads-chapter-bottom">
<div>
﻿<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Using Zend Framework 3 Chapter - Bottom - Adaptive -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3933778336056438"
     data-ad-slot="1546211126"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
</div>
    
<!-- Navigation -->
<div class="navigation">
        <div class="current-chapter">
        <a href="../L_Application_Skeleton_de_Zend.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">L'Application Skeleton de Zend</span>
        </a>
    </div>
        <div class="prev-chapter">
        
        <a href="../L_Application_Skeleton_de_Zend/Les_fichiers_Hosts.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../L_Application_Skeleton_de_Zend/Résumé.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>        
</div>

<div id="disqus_thread"></div>

        
</div>
<footer>
    <div class="footer">
        <div class="footer-body">
            <div class="copyright">
                Copyright &copy; 2018 by Oleg Krivtsov            </div>
            <div class="footer-menu">
                                <div class="footer-link">
                    <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/legal/terms-and-conditions.html">Terms &amp; Conditions</a>
                </div>
                                <div class="footer-link">
                    <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/legal/copyright-policy.html">Copyright Policy</a>
                </div>
                                <div class="footer-link">
                    <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/legal/privacy-policy.html">Privacy Policy</a>
                </div>
                            </div>
            <div class="generated-by">
                Generated using <a href="https://github.com/olegkrivtsov/openbook">OpenBook</a>
            </div>
        </div>    
    </div>
</footer>

<a href="#0" class="cd-top">Top</a>

<script src="../../assets/js/jquery.min.js"></script>
<script src="../../assets/js/loadCSS.js"></script>
<script src="../../assets/js/popup.js"></script>

<script src="../../assets/js/prism.js"></script>

<script>
var disqus_config = function () {
this.page.url = window.location.href; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = ''; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//using-zend-framework-3-book.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
<script>
loadCSS("../../assets/css/prism.css");
</script>

<script>
jQuery(document).ready(function($){
    // browser window scroll (in pixels) after which the "back to top" link is shown
    var offset = 300,
    //browser window scroll (in pixels) after which the "back to top" link opacity is reduced
    offset_opacity = 1200,
    //duration of the top scrolling animation (in ms)
    scroll_top_duration = 700,
    //grab the "back to top" link
    $back_to_top = $('.cd-top');

    //hide or show the "back to top" link
    $(window).scroll(function(){
            ( $(this).scrollTop() > offset ) ? $back_to_top.addClass('cd-is-visible') : $back_to_top.removeClass('cd-is-visible cd-fade-out');
            if( $(this).scrollTop() > offset_opacity ) { 
                    $back_to_top.addClass('cd-fade-out');
            }
    });

    //smooth scroll to top
    $back_to_top.on('click', function(event){
            event.preventDefault();
            $('body,html').animate({
                    scrollTop: 0 ,
                    }, scroll_top_duration
            );
    });

});
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-80824388-1', 'auto');
  ga('send', 'pageview');

</script>

</body>
</html>    

