<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="description" content="A free, read-frendly and open-source book on ZF3">
<meta name="keywords" content="zend framework,book,beginner,free">
<meta name="author" content="2019 by Oleg Krivtsov">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="../../favicon.ico" rel="shortcut icon" type="image/ico" />
<link href="../../assets/css/style.css" type="text/css" rel="stylesheet" />
<title>Autres types de routes &ndash; Using Zend Framework 3</title>
</head>
<body>
<header>
    <div class="header">
        <div class="header-body">
            <div class="book-title">
                <a href="../../index.html">Using Zend Framework 3</a>
            </div>
            <div class="book-subtitle">
                A free, read-frendly and open-source book on ZF3            </div>
            <nav>
                <div class="menu">
                                        <div class="link">
                        <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/html">Home</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zf3-book-samples">Samples</a>
                    </div>
                                        <div class="link">
                        <a href="https://olegkrivtsov.github.io/zf3-api-reference/html/">Class Reference</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zend-framework-3-book">Contribute</a>
                    </div>
                    
                </div>
            </nav>
        </div>    
    </div>
</header>    
<div id="container">
<!-- Navigation -->
<div class="navigation">
    <div class="prev-chapter">
        
        <a href="../Routage/Type_de_route_Regex.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../Routage/Extraire_les_paramètres_d_une_route.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>
        <div class="current-chapter">
        <a href="../Routage.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">Routage</span>
        </a>
    </div>
    </div>

﻿<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Using Zend Framework 3 Book - Chapter - Adaptive -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3933778336056438"
     data-ad-slot="4531860323"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!-- Chapter content -->
<div id="chapter_content">
<div class="incomplete-translation">
    Translation into this language is not yet finished. You can help this project 
    by translating the chapters and contributing your changes.
</div>

<h2 id="Autres_types_de_routes">5.8. Autres types de routes</h2>
<p>Il existe d'autres types de route : <em>Hostname</em>, <em>Scheme</em> et <em>Method</em>, qui sont utilisés moins fréquemment que ceux 
mentionnés précédemment.</p>
<h3 id="Hostname">5.8.1. Hostname</h3>
<p>Le type de route  <em>Hostname</em> peut être utilisé, par exemple, si vous développez un moteur de système de 
gestion de contenu (CMS) <sup id="fnref:cms"><a href="#fn:cms" class="footnote-ref" rel="footnote">7</a></sup>, qui devrait desservir plusieurs sites internet à la fois, chaque site 
utilisant un sous-domaine différent. Dans ce cas, vous définissez la route <em>Hostname</em> en tant que parent 
et imbriquez les routes enfants d'autres types à l'intérieur de celle-ci :</p>
<footnotes id="fn:cms"><p><sup>7)</sup> Un CMS (système de gestion de contenu) est un site permettant la création, l'édition et la 
publication de contenu collaboratif (blogs, pages, documents, vidéos, etc.) à l'aide d'une interface
web centralisée. Les systèmes CMS permettent aux non-programmeurs d'effectuer des tâches quotidiennes 
du site comme la publication de contenu.</p>
</footnotes>
<pre class="line-numbers"><code class="language-php">'routename' =&gt; [
    'type' =&gt; Hostname::class,
    'options' =&gt; [
        'route' =&gt; ':subdomain.yourserver.com',
        'constraints' =&gt; [
            'subdomain' =&gt; '[a-zA-Z][a-zA-Z0-9_-]*'
        ],
        'defaults' =&gt; [        
        ],
    ],
    'child_routes'=&gt;[
        //...
    ],
],
</code></pre>
<p>Dans l'exemple ci-dessus, à la ligne 1, nous définissons une route de type  <em>Hostname</em>. 
L'option <code>route</code> (ligne 4) définit le nom de domaine à comparer. Le <code>:subdomain</code> est un caractère générique 
qui peut prendre différentes valeurs de sous-domaine. La clé <code>constraints</code> définit l'expression régulière 
à laquelle ce paramètre de sous-domaine doit correspondre. La route <em>Hostname</em> différenciera vos domaines 
de facon à ce que chaque site se comportera différemment en fonction de la valeur du paramètre <code>subdomain</code> 
retourné :</p>
<pre class=""><code class="language-php">// Un exemple d'action utilisant des paramètres renvoyés par
// une route Hostname.
public function someAction() 
{
    // On récupère le paramètre 'subdomain' de la route.
    $subdomain = $this-&gt;params()-&gt;fromRoute('subdomain', null);
  
    // On utilise une logique différente basée sur le sous-domaine.
    //... 
        
    // On retourne la vue
    return new ViewModel();
}
</code></pre>
<h3 id="Scheme">5.8.2. Scheme</h3>
<p>Le type de route <em>Scheme</em> est utile si vous devez gérer les protocoles HTTP et HTTPS <sup id="fnref:https"><a href="#fn:https" class="footnote-ref" rel="footnote">8</a></sup> de facon 
différentes.</p>
<footnotes id="fn:https"><p><sup>8)</sup> Le protocole HTTPS est généralement utilisé pour les connexions sécurisées comme une page Mon compte 
ou une page de panier. Lorsque vous utilisez HTTPS, les données de la demande sont tunnellisées via 
le canal SSL (Secure Socket Layer) et non disponibles pour des tiers.</p>
</footnotes>
<p>La configuration de route <em>Scheme</em> est présentée ci-dessous :</p>
<pre class="line-numbers"><code class="language-php">'routename' =&gt; [
    'type' =&gt; Scheme::class,
    'options' =&gt; [
        'scheme' =&gt; 'https',
        'defaults' =&gt; [
            'https' =&gt; true,
        ],    
    ],
    'child_routes'=&gt;[
        //...
    ],
],
</code></pre>
<p>Ci-dessus, nous définissons la route de type <em>Scheme</em>. Elle prend l'option <code>scheme</code> qui doit correspondre 
au système (comme <code>http</code> ou <code>https</code>). Si le schéma dans l'URL de la requête HTTP est exactement le même que 
l'option <code>scheme</code>, la route est considéré comme correspondante. Vous pouvez utiliser la clé <code>defaults</code> 
pour renvoyer certains paramètres lors du matching de route. Dans l'exemple ci-dessus, le paramètre booléen 
<code>https</code> sera renvoyé.</p>
<h3 id="Method">5.8.3. Method</h3>
<p>Le type de route  <em>Method</em> peut être utilisé si vous avez besoin de diriger des requêtes <em>GET</em> et <em>POST</em> dans 
les actions de différents contrôleurs. Sa configuration typique est présentée ci-dessous :</p>
<pre class="line-numbers"><code class="language-php">'routename' =&gt; [
    'type' =&gt; Method::class,
    'options' =&gt; [
        'verb' =&gt; 'post',
        'defaults' =&gt; [        
        ],
    ],
    'child_routes'=&gt;[
        //...
    ],
],
</code></pre>
<p>Ci-dessus, nous définissons une route de type <em>Method</em>. Elle prend l'option <code>verb</code> qui est une liste 
séparée par des virgules de verbes HTTP acceptables (comme <em>get</em>, <em>post</em>, <em>put</em>, etc.)</p>
        
</div>

<!-- Ads -->
<div id="ads-chapter-bottom">
<div>
﻿<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Using Zend Framework 3 Chapter - Bottom - Adaptive -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3933778336056438"
     data-ad-slot="1546211126"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
</div>
    
<!-- Navigation -->
<div class="navigation">
        <div class="current-chapter">
        <a href="../Routage.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">Routage</span>
        </a>
    </div>
        <div class="prev-chapter">
        
        <a href="../Routage/Type_de_route_Regex.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../Routage/Extraire_les_paramètres_d_une_route.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>        
</div>

<div id="disqus_thread"></div>

        
</div>
<footer>
    <div class="footer">
        <div class="footer-body">
            <div class="copyright">
                Copyright &copy; 2019 by Oleg Krivtsov            </div>
            <div class="footer-menu">
                                <div class="footer-link">
                    <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/legal/terms-and-conditions.html">Terms &amp; Conditions</a>
                </div>
                                <div class="footer-link">
                    <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/legal/copyright-policy.html">Copyright Policy</a>
                </div>
                                <div class="footer-link">
                    <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/legal/privacy-policy.html">Privacy Policy</a>
                </div>
                            </div>
            <div class="generated-by">
                Generated using <a href="https://github.com/olegkrivtsov/openbook">OpenBook</a>
            </div>
        </div>    
    </div>
</footer>

<a href="#0" class="cd-top">Top</a>

<script src="../../assets/js/jquery.min.js"></script>
<script src="../../assets/js/loadCSS.js"></script>
<script src="../../assets/js/popup.js"></script>

<script src="../../assets/js/prism.js"></script>

<script>
var disqus_config = function () {
this.page.url = window.location.href; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = ''; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//using-zend-framework-3-book.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
<script>
loadCSS("../../assets/css/prism.css");
</script>

<script>
jQuery(document).ready(function($){
    // browser window scroll (in pixels) after which the "back to top" link is shown
    var offset = 300,
    //browser window scroll (in pixels) after which the "back to top" link opacity is reduced
    offset_opacity = 1200,
    //duration of the top scrolling animation (in ms)
    scroll_top_duration = 700,
    //grab the "back to top" link
    $back_to_top = $('.cd-top');

    //hide or show the "back to top" link
    $(window).scroll(function(){
            ( $(this).scrollTop() > offset ) ? $back_to_top.addClass('cd-is-visible') : $back_to_top.removeClass('cd-is-visible cd-fade-out');
            if( $(this).scrollTop() > offset_opacity ) { 
                    $back_to_top.addClass('cd-fade-out');
            }
    });

    //smooth scroll to top
    $back_to_top.on('click', function(event){
            event.preventDefault();
            $('body,html').animate({
                    scrollTop: 0 ,
                    }, scroll_top_duration
            );
    });

});
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-80824388-1', 'auto');
  ga('send', 'pageview');

</script>

</body>
</html>    

