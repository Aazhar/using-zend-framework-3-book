<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="description" content="A free and open-source book on Zend Framework for beginners">
<meta name="keywords" content="zend framework,book,beginner,free">
<meta name="author" content="2018 by Oleg Krivtsov">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="../../favicon.ico" rel="shortcut icon" type="image/ico" />
<link href="../../assets/css/style.css" type="text/css" rel="stylesheet" />
<title>Los Controladores &ndash; Using Zend Framework 3</title>
</head>
<body>
<header>
    <div class="header">
        <div class="header-body">
            <div class="book-title">
                <a href="../../index.html">Using Zend Framework 3</a>
            </div>
            <div class="book-subtitle">
                A free and open-source book on Zend Framework for beginners            </div>
            <nav>
                <div class="menu">
                                        <div class="link">
                        <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/html">Home</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zf3-book-samples">Samples</a>
                    </div>
                                        <div class="link">
                        <a href="https://olegkrivtsov.github.io/zf3-api-reference/html/">Class Reference</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zend-framework-3-book">Contribute</a>
                    </div>
                    
                </div>
            </nav>
        </div>    
    </div>
</header>    
<div id="container">
<!-- Navigation -->
<div class="navigation">
    <div class="prev-chapter">
        
        <a href="../Modelo_Vista_Controlador/Separar_la_Lógica_del_Negocio_de_la_Presentación.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../Modelo_Vista_Controlador/Recuperar_los_Datos_desde_la_Petición_HTTP.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>
        <div class="current-chapter">
        <a href="../Modelo_Vista_Controlador.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">Modelo-Vista-Controlador</span>
        </a>
    </div>
    </div>

﻿<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Using Zend Framework 3 Book - Chapter - Adaptive -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3933778336056438"
     data-ad-slot="4531860323"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!-- Chapter content -->
<div id="chapter_content">
<div class="incomplete-translation">
    Translation into this language is not yet finished. You can help this project 
    by translating the chapters and contributing your changes.
</div>

<h2 id="Los_Controladores">4.3. Los Controladores</h2>
<p>Una controlador provee comunicación entre la aplicación, los modelos y las vistas.
El controlador trae las entradas desde la petición HTTP y usa los modelos y la
correspondiente vista para producir la respuesta HTTP necesaria.</p>
<p>Los controladores que pertenecen a un módulo residen típicamente en la subcarpeta
<code>Controller</code> del directorio fuente del módulo (se muestra en la figura 4.3).</p>
<p><span class="image-wrapper">
<a target="_blank" href="../../en/images/mvc/controller_dir.png">
<img src="../../en/images/mvc/controller_dir.png" alt="Figura 4.3. Directorio Controlador" /></a>
<span class="image-caption">Figura 4.3. Directorio Controlador</span>
</span>
</p>
<p>Zend Skeleton Application nos provee de una implementación por defecto de la clase
<code>IndexController</code>. La clase <code>IndexController</code> es típicamente la clase controladora
principal de un sitio web. El código se presenta abajo (algunas partes se omitieron
por simplicidad):</p>
<pre class="line-numbers"><code class="language-php">&lt;?php
namespace Application\Controller;

use Zend\Mvc\Controller\AbstractActionController;
use Zend\View\Model\ViewModel;

class IndexController extends AbstractActionController
{
    public function indexAction()
    {
        return new ViewModel();
    }
}
</code></pre>
<p>En el ejemplo de arriba podemos ver que los controladores usualmente definen su
propio namespace (línea 2). El controlador Index, como todos los otros controladores
del módulo <em>Application</em>, están en el namespace <code>Application\Controller</code>.</p>
<p>Un controlador es una clase PHP normal que se deriva de la clase base <code>AbstractAcionController</code>
(línea 7).</p>
<p>Por defecto la clase controlador contiene un solo <em>método de acción</em> llamado
<code>indexAction()</code> (ver líneas 9-12). Generalmente, crearemos otros métodos de acción
en las clases controladoras.</p>
<blockquote class="notquote tip" data-type="tip"><p> ZF3 reconoce automáticamente el método de acción por el sufijo <code>Action</code>.
 Si el nombre del método en el controlador no tiene el sufijo, este se considera
 como un método usual y no una acción.</p>
</blockquote><p>Como lo dice su nombre, un método de acción ejecuta una acción del sitio web que
generalmente resulta en la producción de una página web. El controlador Index
usualmente contiene los métodos de acción para las páginas principales del sitio
web. Por ejemplo, tendremos la acción "index" para la página <em>Home</em>, la acción
"about" para la página <em>Acerca de</em>, la acción "contactUs" para la página <em>Contactanos</em>
y posiblemente otras acciones.</p>
<div class="table-wrapper">
<div class="table-caption">Table 4.1. Acciones típicas de un controlador Index</div><table>
<thead>
<tr>
<th> <em>Método de Acción</em>                 </th>
<th> <em>Descripción</em>                                    </th>
</tr>
</thead>
<tbody>
<tr>
<td>  <code>IndexController::indexAction()</code>                                        </td>
<td>  La acción "index" muestra la página <em>Home</em> de      nuestro sitio web.                               </td>
</tr>
<tr>
<td> <code>IndexController::aboutAction()</code>                                                                             </td>
<td> La acción "about" muestra la página <em>Acerca de</em>    del sitio web. La página <em>Acerca de</em> contiene      información de contacto y de derechos de autor.  </td>
</tr>
<tr>
<td> <code>IndexController::contactUsAction()</code>                                                                                                                  </td>
<td> La acción "contactUs" action muestra la página    <em>Contactanos</em> del sitio web. Esta página muestra  el formulario para contactar a los autores del    sitio.                                          </td>
</tr>
</tbody>
</table>
</div>
<h3 id="Clase_Controladora_Base">4.3.1. Clase Controladora Base</h3>
<p>Cada controlador de nuestra página web hereda desde la clase base <code>AbstractActionController</code>.
En la figura 4.4 el diagrama de herencia de clase se presenta.</p>
<p><span class="image-wrapper">
<a target="_blank" href="../../en/images/mvc/controller_inheritance.png">
<img src="../../en/images/mvc/controller_inheritance.png" alt="Figura 4.4. Diagrama de herencia del controlador" /></a>
<span class="image-caption">Figura 4.4. Diagrama de herencia del controlador</span>
</span>
</p>
<p>La clase <code>AbstractActionController</code> nos provee de varios métodos útiles que se pueden
usar en las clases controladoras. La tabla 4.2 muestra un breve resumen de los métodos:</p>
<div class="table-wrapper">
<div class="table-caption">Tabla 4.2. Métodos útiles de la clase AbstractActionController</div><table>
<thead>
<tr>
<th> <em>Nombre del Método</em>              </th>
<th> <em>Descripción</em>                                          </th>
</tr>
</thead>
<tbody>
<tr>
<td>  <code>getRequest()</code>                                                      </td>
<td>  Recupera el objeto <code>Zend\Http\Request</code>, que es la        representación de los datos de la petición HTTP.       </td>
</tr>
<tr>
<td> <code>getResponse()</code>                                                     </td>
<td> Recupera el objeto <code>Zend\Http\PhpEnvironment\Response</code>   que permite insertar datos en la respuesta HTTP.       </td>
</tr>
<tr>
<td> <code>getEventManager()</code>                                                 </td>
<td> Regresa el objeto <code>Zend\EventManager\EventManager</code>       que permite lanzar eventos y escuchar los eventos.     </td>
</tr>
<tr>
<td> <code>getEvent()</code>                                                        </td>
<td> Regresa el objeto <code>Zend\Mvc\MvcEvent</code> que representa     al evento al que el controlador responde.              </td>
</tr>
<tr>
<td> <code>getPluginManager()</code>                                                                                   </td>
<td> Regresa el objeto <code>Zend\Mvc\Controller\PluginManager</code>    que se puede usar para registrar complementos            controladores (controller plugins)                     </td>
</tr>
<tr>
<td> <code>plugin($name, $options)</code>                                           </td>
<td> Este método permite acceder a determinado complemento    a partir de un nombre dado.                            </td>
</tr>
<tr>
<td> <code>__call($method, $params)</code>                                          </td>
<td> Permite llamar a un complemento indirectamente usando    el método mágico de PHP <code>__call</code>.                      </td>
</tr>
</tbody>
</table>
</div>
<p>Como podemos ver en la tabla de arriba la clase controladora base nos permite
acceder a los datos de la petición y respuesta HTTP, además, provee de acceso al
administrador de eventos (event manager). Además, nos da la capacidad de registrar
y llamar a los complementos del controlador (aprenderemos sobre los complementos
del controlador luego en este capítulo).</p>
        
</div>

<!-- Ads -->
<div id="ads-chapter-bottom">
<div>
﻿<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Using Zend Framework 3 Chapter - Bottom - Adaptive -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3933778336056438"
     data-ad-slot="1546211126"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
</div>
    
<!-- Navigation -->
<div class="navigation">
        <div class="current-chapter">
        <a href="../Modelo_Vista_Controlador.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">Modelo-Vista-Controlador</span>
        </a>
    </div>
        <div class="prev-chapter">
        
        <a href="../Modelo_Vista_Controlador/Separar_la_Lógica_del_Negocio_de_la_Presentación.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../Modelo_Vista_Controlador/Recuperar_los_Datos_desde_la_Petición_HTTP.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>        
</div>

<div id="disqus_thread"></div>

        
</div>
<footer>
    <div class="footer">
        <div class="footer-body">
            <div class="copyright">
                Copyright &copy; 2018 by Oleg Krivtsov            </div>
            <div class="footer-menu">
                                <div class="footer-link">
                    <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/legal/terms-and-conditions.html">Terms &amp; Conditions</a>
                </div>
                                <div class="footer-link">
                    <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/legal/copyright-policy.html">Copyright Policy</a>
                </div>
                                <div class="footer-link">
                    <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/legal/privacy-policy.html">Privacy Policy</a>
                </div>
                            </div>
            <div class="generated-by">
                Generated using <a href="https://github.com/olegkrivtsov/openbook">OpenBook</a>
            </div>
        </div>    
    </div>
</footer>

<a href="#0" class="cd-top">Top</a>

<script src="../../assets/js/jquery.min.js"></script>
<script src="../../assets/js/loadCSS.js"></script>
<script src="../../assets/js/popup.js"></script>

<script src="../../assets/js/prism.js"></script>

<script>
var disqus_config = function () {
this.page.url = window.location.href; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = ''; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//using-zend-framework-3-book.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
<script>
loadCSS("../../assets/css/prism.css");
</script>

<script>
jQuery(document).ready(function($){
    // browser window scroll (in pixels) after which the "back to top" link is shown
    var offset = 300,
    //browser window scroll (in pixels) after which the "back to top" link opacity is reduced
    offset_opacity = 1200,
    //duration of the top scrolling animation (in ms)
    scroll_top_duration = 700,
    //grab the "back to top" link
    $back_to_top = $('.cd-top');

    //hide or show the "back to top" link
    $(window).scroll(function(){
            ( $(this).scrollTop() > offset ) ? $back_to_top.addClass('cd-is-visible') : $back_to_top.removeClass('cd-is-visible cd-fade-out');
            if( $(this).scrollTop() > offset_opacity ) { 
                    $back_to_top.addClass('cd-fade-out');
            }
    });

    //smooth scroll to top
    $back_to_top.on('click', function(event){
            event.preventDefault();
            $('body,html').animate({
                    scrollTop: 0 ,
                    }, scroll_top_duration
            );
    });

});
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-80824388-1', 'auto');
  ga('send', 'pageview');

</script>

</body>
</html>    

