<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="description" content="A free and open-source book on ZF3 for beginners">
<meta name="keywords" content="zend framework,book,beginner,free">
<meta name="author" content="2019 by Oleg Krivtsov">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="../../favicon.ico" rel="shortcut icon" type="image/ico" />
<link href="../../assets/css/style.css" type="text/css" rel="stylesheet" />
<title>Agregar Scripts a la Página Web &ndash; Using Zend Framework 3</title>
</head>
<body>
<header>
    <div class="header">
        <div class="header-body">
            <div class="book-title">
                <a href="../../index.html">Using Zend Framework 3</a>
            </div>
            <div class="book-subtitle">
                A free and open-source book on ZF3 for beginners            </div>
            <nav>
                <div class="menu">
                                        <div class="link">
                        <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/html">Home</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zf3-book-samples">Samples</a>
                    </div>
                                        <div class="link">
                        <a href="https://olegkrivtsov.github.io/zf3-api-reference/html/">Class Reference</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zend-framework-3-book">Contribute</a>
                    </div>
                    
                </div>
            </nav>
        </div>    
    </div>
</header>    
<div id="container">
<!-- Navigation -->
<div class="navigation">
    <div class="prev-chapter">
        
        <a href="../Apariencia_y_Diseño_de_la_Página/Ayudante_de_Vista_Placeholder.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../Apariencia_y_Diseño_de_la_Página/Agregar_las_Hojas_de_Estilo_CSS_a_la_Página_Web.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>
        <div class="current-chapter">
        <a href="../Apariencia_y_Diseño_de_la_Página.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">Apariencia y Diseño de la Página</span>
        </a>
    </div>
    </div>

﻿<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Using Zend Framework 3 Book - Chapter - Adaptive -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3933778336056438"
     data-ad-slot="4531860323"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!-- Chapter content -->
<div id="chapter_content">
<div class="incomplete-translation">
    Translation into this language is not yet finished. You can help this project 
    by translating the chapters and contributing your changes.
</div>

<h2 id="Agregar_Scripts_a_la_Página_Web">6.7. Agregar Scripts a la Página Web</h2>
<p>El código JavaScript se puede insertar dentro de las páginas HTML y hacerlas
interactivas. Los scripts se podrían insertar en el archivo HTML entre las
etiquetas <code>&lt;script&gt;</code> y <code>&lt;\script&gt;</code>. Abajo presentamos código JavaScript de
ejemplo:</p>
<pre class=""><code class="language-php">&lt;script type="text/javascript"&gt;
  // Show a simple alert window with the "Hello World!" text.
  $(document).ready(function() {
    alert('Hello World!');
  });
&lt;/script&gt;
</code></pre>
<p>En el ejemplo de arriba creamos el elemento <code>&lt;script&gt;</code> y colocamos la llamada
a la función jQuery en él. La función que está atada a jQuery se ejecuta cuando
el DOM ha terminado de cargarse. Cuando la función se ejecuta una ventana de
alerta con el texto "Hello World!" y el botón OK aparecerá.</p>
<p>Como colocamos el código JavaScript dentro del archivo HTML nos referiremos a él
como un script <em>en linea</em>. Una manera alternativa para guardar código JavaScript
es colocándolo en un archivo <code>.js</code> <em>externo</em>. Los archivos externos generalmente
contienen código que se diseña para usarse en varias páginas. Generalmente los
archivos JavaScript externos se almacenan en el directorio <em>APP_DIR/public/js/</em>.
Para enlazar un archivo JS a nuestra página HTML agregamos el elemento <code>&lt;script&gt;</code>
como se muestra abajo:</p>
<pre class=""><code class="language-php">&lt;script type="text/javascript" src="/js/yourscript.js"&gt;&lt;/script&gt;
</code></pre>
<p>Cuando el navegador encuentra un elemento <code>&lt;script&gt;</code> lee el archivo JS externo
y ejecuta el código.</p>
<p>Generalmente hay dos lugares dentro del archivo HTML donde podemos colocar
el script:</p>
<ul>
<li><p>El código JavaScript se puede colocar en la sección <code>&lt;head&gt;</code> de una página
HTML. Es recomendable usar este método cuando necesitamos que el JavaScript
se cargue antes que el contenido de la página. Usamos este método para cargar
la extensión de JavaScript Twitter Bootstrap y la biblioteca jQuery.</p>
</li>
<li><p>El script se puede colocar al final de la sección <code>&lt;body&gt;</code> de la paǵina HTML,
exactamente antes de cerrar la etiqueta <code>&lt;/body&gt;</code>. Esta manera es mejor cuando
si necesitamos que todo el DOM se cargue antes de que el script pueda comenzar
a ejecutarse.</p>
</li>
</ul>
<footnotes id="fn:dom"><p><sup>14)</sup> El DOM (Modelo de Objetos del Documento) es una conveniente representación
de la estructura de un documento HTML en forma de un árbol de documentos.</p>
</footnotes>
<p>Si un determinado archivo JavaScript se necesita usar en todos (o en la mayoría)
de las páginas web es mejor colocarlo en una plantilla de vista. Pero cuando un
script se usa en sola una página, colocarlo en la plantilla no es la mejor
idea. Si colocamos un script en una plantilla el script se cargará en todas
las páginas lo que puede producir un trafico innecesario y un incremento del tiempo
de carga de la página y de todo el sitio. Para evitarlo podemos agregar un script
para determinadas páginas solamente.</p>
<p>Para agregar un script especifico de página que colocaremos en la sección <code>&lt;head&gt;</code>
de nuestra página usamos el ayudante de vista <code>HeadScript</code>. Los métodos de este
ayudante se resumen abajo en la tabla 6.1:</p>
<div class="table-wrapper">
<div class="table-caption">Tabla 6.1. Métodos que provee el ayudate de vista HeadScript</div><table>
<thead>
<tr>
<th> <em>Método</em>                       </th>
<th> <em>Descripción</em>                                                 </th>
</tr>
</thead>
<tbody>
<tr>
<td>  <code>appendFile()</code>                                                  </td>
<td>  Coloca un enlace a un archivo JS externo después de todos       los otros.                                                    </td>
</tr>
<tr>
<td> <code>offsetSetFile()</code>                                               </td>
<td> Inserta un enlace a un archivo JS externo en una posición       determinada dentro de la lista.                               </td>
</tr>
<tr>
<td> <code>prependFile()</code>                                                 </td>
<td> Coloca un enlace a un archivo JS externo antes que todos los    otros.                                                        </td>
</tr>
<tr>
<td> <code>setFile()</code>                                                     </td>
<td> Limpia la lista de scripts y coloca solo el archivo JS          externo que se indicó.                                        </td>
</tr>
<tr>
<td> <code>appendScript()</code>               </td>
<td> Coloca un script en línea después de todos los otros.         </td>
</tr>
<tr>
<td> <code>offsetSetScript()</code>            </td>
<td> Inserta un script en línea en una posición dada de la lista.  </td>
</tr>
<tr>
<td> <code>prependScript()</code>              </td>
<td> Coloca un script en línea antes de todos los otros scripts.   </td>
</tr>
<tr>
<td> <code>setScript()</code>                                                   </td>
<td> Limpia la lista de scripts en línea y coloca solo el script     en línea dado.                                                </td>
</tr>
</tbody>
</table>
</div>
<p>Para agregar un enlace a un archivo JS externo en la sección <code>&lt;head&gt;</code> de la página
agregamos el siguiente código PHP al comienzo de nuestro archivo de plantilla de
vista (<em>.phtml</em>):</p>
<pre class=""><code class="language-php">&lt;?php
$this-&gt;headScript()-&gt;appendFile('/js/yourscript.js', 'text/javascript');
?&gt;
</code></pre>
<p>En el código de arriba llamamos al método <code>appendFile()</code> del ayudante de vista
<code>HeadScript</code>. Este método toma dos argumentos. El primero de ellos es la ruta
al archivo JS externo (si el archivo se guarda dentro del directorio
<em>APP_DIR/public/js</em> o una URL a un archivo JS que está ubicado en otro servidor
web). El segundo argumento es el tipo de script (generalmente este valor es
igual "text/javascript").</p>
<p>Otros métodos que provee el ayudante de vista <code>HeadScript</code>; como <code>prependFile()</code>,
<code>offsetSetFile()</code> y <code>setFile()</code>; se diferencian solo por la posición en la lista
de scripts donde el nuevo script se insertará.</p>
<p>Los métodos <code>prependScript()</code>, <code>appendScript()</code>, <code>offsetSetScript()</code> y <code>setScript()</code>
se diseñan para insertar código JavaScript en línea. Ellas se usan raramente porque
generalmente insertamos scripts JS externos en la sección head del documento.</p>
<p>Para insertar un script al final de la sección <code>&lt;body&gt;</code> del documento podemos
usar el ayudante de vista <code>InlineScript</code> <sup id="fnref:inlinescript"><a href="#fn:inlinescript" class="footnote-ref" rel="footnote">15</a></sup>. Este provee exactamente
los mismos métodos que el ayudante <code>HeadScript</code>. Abajo presentamos un ejemplo
de como se puede agregar código JavaScript en línea al final del cuerpo del
documento.</p>
<footnotes id="fn:inlinescript"><p><sup>15)</sup> El nombre <code>InlineScript</code> no refleja con exactitud las capacidades
de este ayudante de vista. Este, en realidad, puede insertar
tanto script en línea como externos. La mejor forma de nombrar
a este script debería ser <code>BodyScript</code> porque él está destinado
para insertar scripts en el cuerpo del documento.</p>
</footnotes>
<pre class=""><code class="language-php">&lt;?php
$script = &lt;&lt;&lt;EOT
  $(document).ready(function() {
    alert('Hello World!');
  });
EOT;
$this-&gt;inlineScript()-&gt;appendScript($script);
</code></pre>
<p>En el ejemplo de arriba usamos la sintaxis Heredoc <sup id="fnref:heredoc"><a href="#fn:heredoc" class="footnote-ref" rel="footnote">16</a></sup> de PHP para llenar
la variable <code>$script</code> con el código JavaScript en línea. Luego llamamos a la
función <code>appendScript()</code> del ayudante de vista <code>InlineScript</code> y le pasamos el
código como argumento.</p>
<footnotes id="fn:heredoc"><p><sup>16)</sup> Heredoc es un método alternativo provisto por PHP que permite
definir cadenas de caracteres. Este método trabaja bien con cadenas
de caracteres de multiples líneas.</p>
</footnotes>
<p>Sin embargo usar el ayudante de vista <code>InlineScript</code> puedo no se conveniente
si pensamos en la legibilidad. Además, el corrector de sintaxis de editores de
texto como NetBeans fallan al detectar la notación Heredoc y no reconocerán
el código JavaScript. Para reparar este problema simplemente podemos colocar
el elemento <code>&lt;script&gt;</code> al final de nuestra plantilla de vista como se muestra
en el ejemplo de abajo:</p>
<pre class=""><code class="language-php">&lt;!-- Page content goes first --&gt;

&lt;!-- Inline script goes last --&gt;
&lt;script type="text/javascript"&gt;
  $(document).ready(function() {
    // Show a simple alert window with the "Hello World!" text.
    alert("Hello World!");
  });
&lt;/script&gt;
</code></pre>
<p>Con esto logramos el mismo efecto que con el ayudante de vista <code>InlineScript</code>
pero esta manera mejora la legibilidad del script y la sintaxis es automáticamente
revisada por NetBeans.</p>
<blockquote class="notquote information" data-type="information"><p> Es necesario que el contenido se imprima en la plantilla de vista para que
 los ayudantes de vista <code>HeadScript</code> y <code>InlineScript</code> funcionen (como se
 muestra en las líneas 23 y 62 del archivo <em>layout.phtml</em>). Si quitamos estas
 líneas de la plantilla de maqueta los scripts no se insertaran in la página
 web.</p>
</blockquote><h3 id="Ejemplo">6.7.1. Ejemplo</h3>
<p>A manera de ejemplo realista insertaremos un pedazo de código JavaScript en
nuestra página web que nos permitirá agregar la característica de autocompletado.
Con esta característica el navegador web predirá una palabra o frase a partir
de las primeras letras que el usuario escriba evitando que él escriba el texto
completo. Podemos usar la biblioteca de JavaScript <em>Twitter Typeahead</em>.
Análogamente a Twitter Bootstrap la biblioteca Typeahead fue desarrollada por
Twitter Inc. para satisfacer sus necesidades pero se distribuye libremente.</p>
<p>Descargamos el archivo <em>typeahead.min.js</em> (la versión miniaturizada de la
biblioteca Typeahead) desde la <a target="_blank" href="http://twitter.github.io/typeahead.js/">página oficial</a>
del proyecto. Cuando la descarga termina colocamos el archivo en la carpeta
<em>APP_DIR/public/js</em>.</p>
<p>Luego agregamos el archivo <em>typeahead.phtml</em> a la subcarpeta <em>application/index/static</em>
que esta dentro de la carpeta <em>view</em> del módulo. El tipo de ruta <code>StaticRoute</code>,
que creamos y configuramos antes en el capítulo <a  href="../Routing.html">Routing</a>,
usa esa carpeta y hace que todas las páginas "estáticas" que se colocan allí
estén automáticamente disponibles para todos los usuarios del sitio,</p>
<p>En el archivo de plantilla de vista <em>typeahead.phtml</em> colocamos el siguiente
código:</p>
<pre class="line-numbers"><code class="language-php">&lt;?php
$this-&gt;headTitle('Typeahead');
// Add a JavaScript file
$this-&gt;headScript()-&gt;appendFile('/js/typeahead.min.js', 'text/javascript');
?&gt;

&lt;h1&gt;Typeahead&lt;/h1&gt;
&lt;p&gt;Type a continent name (e.g. Africa) in the text field below:&lt;/p&gt;
&lt;input type="text" class="typeahead" title="Type here"/&gt;

&lt;script type="text/javascript"&gt;
  $(document).ready(function() {
    $('input.typeahead').typeahead({
       name: 'continents',
       local: [
            'Africa',
            'Antarctica',
            'Asia',
            'Europe',
            'South America',
            'North America'
        ]
    });
  });
&lt;/script&gt;
</code></pre>
<p>En el código de arriba colocamos el título de la página (línea 2) luego agregamos
el archivo <em>typeahead.min.js</em> a la sección <code>&lt;head&gt;</code> de la página con el ayudante
de vista <code>HeadScript</code> (línea 4).</p>
<p>En la línea 9 creamos un campo de texto de entrada donde los usuarios serán
capaces de escribir algún texto. Marcamos el campo de entrada con la clase CSS
<code>typeahead</code>.</p>
<p>Las líneas 11-25 contienen código JavaScript en línea colocado al final de la
plantilla de vista (no usamos el ayudante de vista <code>InlineScript</code> en procura
de mejorar la legibilidad).</p>
<p>En la línea 12 tenemos el administrador de eventos de jQuery asociado al evento
"document is ready". Este evento se lanzá cuando el árbol DOM se ha cargado.</p>
<p>En la línea 13 tenemos el selector jQuery ("input.typeahead") que selecciona todos
los campos <em>input</em> marcados con la clase CSS <code>typeahead</code> y ejecuta la función
<code>typeahead()</code> en ellos.</p>
<p>La función <code>typeahead()</code> vincula al administrador de eventos con algún cambio en
el campo de texto <em>input</em>. Una vez que el usuario ingresa un carácter en el
campo el administrador se ejecuta y revisa las letras introducidas. Luego se
muestra un menú desplegable con las variantes sugeridas por el autocompletado.</p>
<p>La función <code>typeahead()</code> toma dos argumentos: el argumento <code>name</code> identifica
el conjunto de datos y el argumento <code>local</code> es un arreglo JSON que contiene
las variables disponibles para la autocompletación.</p>
<p>Para dar al campo de autocompletación y a su menú desplegable una apariencia
visual agradable agregamos las siguientes reglas CSS a nuestro archivo <em>style.css</em>.</p>
<pre class=""><code class="language-css">.typeahead,
.tt-query,
.tt-hint {
  width: 396px;
  height: 30px;
  padding: 0px 12px;
  font-size: 1.1em;
  border: 2px solid #ccc;
  border-radius: 4px;
  outline: none;
}

.tt-dropdown-menu {
  width: 422px;
  margin-top: 12px;
  padding: 8px 0;
  background-color: #fff;
  border: 1px solid #ccc;
  border: 1px solid rgba(0, 0, 0, 0.2);
  border-radius: 4px;
}

.tt-suggestion {
  padding: 3px 20px;
  font-size: 1.1em;
  line-height: 24px;
}

.tt-suggestion.tt-is-under-cursor {
  color: #fff;
  background-color: #0097cf;
}

.tt-suggestion p {
  margin: 0;
}
</code></pre>
<p>Para ver la característica de autocompletación trabajando escribimos la URL
"http://localhost/typeahead" en nuestro navegador web y presionamos Enter.
La página <em>Typeahead</em> aparecerá con el cursor en el campo dispuesto para
ingresar un nombre. Por ejemplo, al escribir a letra <em>a</em> veremos como
Typeahead sugiere las variables disponibles (figura 6.7).</p>
<p><span class="image-wrapper">
<a target="_blank" href="../../en/images/appearance/typeahead.png">
<img src="../../en/images/appearance/typeahead.png" alt="Figura 6.7. Característica Auto-complete" /></a>
<span class="image-caption">Figura 6.7. Característica Auto-complete</span>
</span>
</p>
<blockquote class="notquote tip" data-type="tip"><p> Podemos ver el ejemplo trabajando en la aplicación <em>Hello World</em> que se añade
 a este libro escribiendo la URL "http://localhost/typeahead" en el
 navegador web.</p>
</blockquote>        
</div>

<!-- Ads -->
<div id="ads-chapter-bottom">
<div>
﻿<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Using Zend Framework 3 Chapter - Bottom - Adaptive -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3933778336056438"
     data-ad-slot="1546211126"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
</div>
    
<!-- Navigation -->
<div class="navigation">
        <div class="current-chapter">
        <a href="../Apariencia_y_Diseño_de_la_Página.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">Apariencia y Diseño de la Página</span>
        </a>
    </div>
        <div class="prev-chapter">
        
        <a href="../Apariencia_y_Diseño_de_la_Página/Ayudante_de_Vista_Placeholder.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../Apariencia_y_Diseño_de_la_Página/Agregar_las_Hojas_de_Estilo_CSS_a_la_Página_Web.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>        
</div>

<div id="disqus_thread"></div>

        
</div>
<footer>
    <div class="footer">
        <div class="footer-body">
            <div class="copyright">
                Copyright &copy; 2019 by Oleg Krivtsov            </div>
            <div class="footer-menu">
                                <div class="footer-link">
                    <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/legal/terms-and-conditions.html">Terms &amp; Conditions</a>
                </div>
                                <div class="footer-link">
                    <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/legal/copyright-policy.html">Copyright Policy</a>
                </div>
                                <div class="footer-link">
                    <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/legal/privacy-policy.html">Privacy Policy</a>
                </div>
                            </div>
            <div class="generated-by">
                Generated using <a href="https://github.com/olegkrivtsov/openbook">OpenBook</a>
            </div>
        </div>    
    </div>
</footer>

<a href="#0" class="cd-top">Top</a>

<script src="../../assets/js/jquery.min.js"></script>
<script src="../../assets/js/loadCSS.js"></script>
<script src="../../assets/js/popup.js"></script>

<script src="../../assets/js/prism.js"></script>

<script>
var disqus_config = function () {
this.page.url = window.location.href; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = ''; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//using-zend-framework-3-book.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
<script>
loadCSS("../../assets/css/prism.css");
</script>

<script>
jQuery(document).ready(function($){
    // browser window scroll (in pixels) after which the "back to top" link is shown
    var offset = 300,
    //browser window scroll (in pixels) after which the "back to top" link opacity is reduced
    offset_opacity = 1200,
    //duration of the top scrolling animation (in ms)
    scroll_top_duration = 700,
    //grab the "back to top" link
    $back_to_top = $('.cd-top');

    //hide or show the "back to top" link
    $(window).scroll(function(){
            ( $(this).scrollTop() > offset ) ? $back_to_top.addClass('cd-is-visible') : $back_to_top.removeClass('cd-is-visible cd-fade-out');
            if( $(this).scrollTop() > offset_opacity ) { 
                    $back_to_top.addClass('cd-fade-out');
            }
    });

    //smooth scroll to top
    $back_to_top.on('click', function(event){
            event.preventDefault();
            $('body,html').animate({
                    scrollTop: 0 ,
                    }, scroll_top_duration
            );
    });

});
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-80824388-1', 'auto');
  ga('send', 'pageview');

</script>

</body>
</html>    

