<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="description" content="A free and open-source book on ZF3 for beginners">
<meta name="keywords" content="zend framework,book,beginner,free">
<meta name="author" content="2019 by Oleg Krivtsov">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="../../favicon.ico" rel="shortcut icon" type="image/ico" />
<link href="../../assets/css/style.css" type="text/css" rel="stylesheet" />
<title>Combinar Tipos de Ruta &ndash; Using Zend Framework 3</title>
</head>
<body>
<header>
    <div class="header">
        <div class="header-body">
            <div class="book-title">
                <a href="../../index.html">Using Zend Framework 3</a>
            </div>
            <div class="book-subtitle">
                A free and open-source book on ZF3 for beginners            </div>
            <nav>
                <div class="menu">
                                        <div class="link">
                        <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/html">Home</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zf3-book-samples">Samples</a>
                    </div>
                                        <div class="link">
                        <a href="https://olegkrivtsov.github.io/zf3-api-reference/html/">Class Reference</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zend-framework-3-book">Contribute</a>
                    </div>
                    
                </div>
            </nav>
        </div>    
    </div>
</header>    
<div id="container">
<!-- Navigation -->
<div class="navigation">
    <div class="prev-chapter">
        
        <a href="../Routing/Tipos_de_rutas.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../Routing/Configuración_del_Routing.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>
        <div class="current-chapter">
        <a href="../Routing.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">Routing</span>
        </a>
    </div>
    </div>

﻿<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Using Zend Framework 3 Book - Chapter - Adaptive -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3933778336056438"
     data-ad-slot="4531860323"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!-- Chapter content -->
<div id="chapter_content">
<div class="incomplete-translation">
    Translation into this language is not yet finished. You can help this project 
    by translating the chapters and contributing your changes.
</div>

<h2 id="Combinar_Tipos_de_Ruta">5.3. Combinar Tipos de Ruta</h2>
<p>Las rutas se pueden combinar con la ayuda del tipo de ruta "aggregate" (ver tabla 5.2).
Los tipos de ruta compuestos permiten definir arbitrariamente reglas complejas para la comparación
de URL.</p>
<div class="table-wrapper">
<div class="table-caption">Table 5.2. Tipo de Ruta Aggregate</div><table>
<thead>
<tr>
<th> <em>Tipo de Ruta</em>                 </th>
<th> <em>Descripción</em>                                                 </th>
</tr>
</thead>
<tbody>
<tr>
<td>  <em>SimpleRouteStack</em>             </td>
<td>  Agregar diferentes tipos de rutas en una lista con prioridades. </td>
</tr>
<tr>
<td> <em>TreeRouteStack</em>               </td>
<td> Agregar diferentes tipos de rutas en una estructura tipo árbol. </td>
</tr>
<tr>
<td> <em>Part</em>                         </td>
<td> Agregar diferentes tipos de rutas a un sub árbol.             </td>
</tr>
<tr>
<td> <em>Chain</em>                        </td>
<td> Agregar diferentes tipos de rutas a una cadena (sub árbol degenerativo). </td>
</tr>
</tbody>
</table>
</div>
<p>Los tipos de ruta <code>TreeRouteStack</code> y <code>SimpleRouteStack</code> se usan como los tipos de
ruta de primer nivel. El tipo de ruta <em>SimpleRouteStack</em> permite organizar diferentes
rutas en una lista con prioridades. <em>TreeRouteStack</em> permite <em>anidar</em> diferentes
rutas formando un <em>árbol</em>.</p>
<p>La figura 5.2 muestra el diagrama de herencia de la clase route.</p>
<p><span class="image-wrapper">
<a target="_blank" href="../../en/images/routing/route_inheritance.png">
<img src="../../en/images/routing/route_inheritance.png" alt="Figure 5.2. Diagrama de herencia de la clase route" /></a>
<span class="image-caption">Figure 5.2. Diagrama de herencia de la clase route</span>
</span>
</p>
<p>Como podemos ver en la imagen, todas las clases de ruta heredan de la interface <code>RouteInterface</code>
(revisaremos más detalladamente esta interface en la sección <em>Escribir un Tipo de Ruta Propia</em>
que está más adelante en esta sección). <code>SimpleRouteStack</code> es la clase padre de la
clase <code>TreeRouteStack</code>, esta hereda su comportamiento de la clase padre (permitiendo
organizar las rutas en un lista con prioridades) y lo extiende (permitiendo organizar
rutas en sub árboles). Las clases <code>Part</code> y <code>Chain</code> se derivan de la clase <code>TreeRouteStack</code>
que las usa internamente para construir sub árboles y cadenas de rutas hijas.</p>
<h3 id="Simple_Route_Stack">5.3.1. Simple Route Stack</h3>
<p>El <code>SimpleRouteStack</code> permite combinar diferentes rutas en una lista con prioridades.
Un ejemplo de una lista como esta se puede ver en la pila de rutas de la parte
izquierda de la figura 5.3. La lista de ejemplo contiene varias rutas <em>Literal</em> y
varias rutas <em>Segment</em>.</p>
<p>Cuando se prueba la coincidencia con la petición HTTP, <code>SimpleRouteStack</code> recorre
la lista de rutas e intenta hacer coincidir cada ruta. Cada ruta de la lista tiene
una prioridad; la ruta con la mayor prioridad se visita primero. La búsqueda termina
una vez que alguna ruta coincide con la petición HTTP. Si ninguna ruta coincide el
error "not fount" se lanza.</p>
<p><span class="image-wrapper">
<a target="_blank" href="../../en/images/routing/route_tree.png">
<img src="../../en/images/routing/route_tree.png" alt="Figure 5.3. Un ejemplo de Simple Route Stack (izquierda) y Tree Route Stack (derecha)" /></a>
<span class="image-caption">Figure 5.3. Un ejemplo de Simple Route Stack (izquierda) y Tree Route Stack (derecha)</span>
</span>
</p>
<h3 id="Tree_Route_Stack">5.3.2. Tree Route Stack</h3>
<p>La clase <code>TreeRouteStack</code> extiende de la clase <code>SimpleRouteStack</code> lo que significa
que esta se puede organizar en una lista de prioridades, además, provee la capacidad
de anidar rutas en subárboles y cadenas. Una ejemplo de una pila de rutas en árbol se
presenta en la parte derecha de la figura 5.3. La lista contiene una ruta <code>Literal</code>,
una cadena de rutas <code>Literal</code> y <code>Segment</code>, y un subárbol con dos ramas: una rama
contiene una ruta única <code>Segment</code> y otra rama contiene rutas <code>Scheme</code>, <code>Hostname</code> y
<code>Segment</code>.</p>
<p>La pila de rutas en árbol ejecuta la comparación con la petición de la siguiente
manera. Esta recorre los elementos de la lista de prioridades (con líneas punteadas en la figura 5.3),
comenzando con las rutas de más alta prioridad. Si un elemento determinado es una ruta <code>Chain</code>
o una ruta <code>Part</code>, se procesa cada ruta anidada desde su ruta padre al hijo. Si la
ruta padre coincide, los hijos (en líneas solidas) se analizan. La ruta anidada
se considera coincidente si al menos una ruta coincide en algún nivel del árbol
(o cadena).</p>
<p>Cada ruta en el árbol (o cadena) consume una parte de la URL (figura 5.4). La ruta
padre se compara contra la primera parte de la URL, el hijo se compara con la segunda
parte y así sucesivamente hasta el final de la cadena URL.</p>
<p><span class="image-wrapper">
<a target="_blank" href="../../en/images/routing/route_matching.png">
<img src="../../en/images/routing/route_matching.png" alt="Figure 5.4. Un ejemplo de la comparación anidada de rutas" /></a>
<span class="image-caption">Figure 5.4. Un ejemplo de la comparación anidada de rutas</span>
</span>
</p>
        
</div>

<!-- Ads -->
<div id="ads-chapter-bottom">
<div>
﻿<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Using Zend Framework 3 Chapter - Bottom - Adaptive -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3933778336056438"
     data-ad-slot="1546211126"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
</div>
    
<!-- Navigation -->
<div class="navigation">
        <div class="current-chapter">
        <a href="../Routing.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">Routing</span>
        </a>
    </div>
        <div class="prev-chapter">
        
        <a href="../Routing/Tipos_de_rutas.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../Routing/Configuración_del_Routing.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>        
</div>

<div id="disqus_thread"></div>

        
</div>
<footer>
    <div class="footer">
        <div class="footer-body">
            <div class="copyright">
                Copyright &copy; 2019 by Oleg Krivtsov            </div>
            <div class="footer-menu">
                                <div class="footer-link">
                    <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/legal/terms-and-conditions.html">Terms &amp; Conditions</a>
                </div>
                                <div class="footer-link">
                    <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/legal/copyright-policy.html">Copyright Policy</a>
                </div>
                                <div class="footer-link">
                    <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/legal/privacy-policy.html">Privacy Policy</a>
                </div>
                            </div>
            <div class="generated-by">
                Generated using <a href="https://github.com/olegkrivtsov/openbook">OpenBook</a>
            </div>
        </div>    
    </div>
</footer>

<a href="#0" class="cd-top">Top</a>

<script src="../../assets/js/jquery.min.js"></script>
<script src="../../assets/js/loadCSS.js"></script>
<script src="../../assets/js/popup.js"></script>

<script src="../../assets/js/prism.js"></script>

<script>
var disqus_config = function () {
this.page.url = window.location.href; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = ''; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//using-zend-framework-3-book.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
<script>
loadCSS("../../assets/css/prism.css");
</script>

<script>
jQuery(document).ready(function($){
    // browser window scroll (in pixels) after which the "back to top" link is shown
    var offset = 300,
    //browser window scroll (in pixels) after which the "back to top" link opacity is reduced
    offset_opacity = 1200,
    //duration of the top scrolling animation (in ms)
    scroll_top_duration = 700,
    //grab the "back to top" link
    $back_to_top = $('.cd-top');

    //hide or show the "back to top" link
    $(window).scroll(function(){
            ( $(this).scrollTop() > offset ) ? $back_to_top.addClass('cd-is-visible') : $back_to_top.removeClass('cd-is-visible cd-fade-out');
            if( $(this).scrollTop() > offset_opacity ) { 
                    $back_to_top.addClass('cd-fade-out');
            }
    });

    //smooth scroll to top
    $back_to_top.on('click', function(event){
            event.preventDefault();
            $('body,html').animate({
                    scrollTop: 0 ,
                    }, scroll_top_duration
            );
    });

});
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-80824388-1', 'auto');
  ga('send', 'pageview');

</script>

</body>
</html>    

