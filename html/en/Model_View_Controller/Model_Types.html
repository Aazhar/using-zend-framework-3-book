<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="description" content="A free, read-frendly and open-source book on ZF3">
<meta name="keywords" content="zend framework,book,beginner,free">
<meta name="author" content="2018 by Oleg Krivtsov">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="../../favicon.ico" rel="shortcut icon" type="image/ico" />
<link href="../../assets/css/style.css" type="text/css" rel="stylesheet" />
<title>Model Types &ndash; Using Zend Framework 3</title>
</head>
<body>
<header>
    <div class="header">
        <div class="header-body">
            <div class="book-title">
                <a href="../../index.html">Using Zend Framework 3</a>
            </div>
            <div class="book-subtitle">
                A free, read-frendly and open-source book on ZF3            </div>
            <nav>
                <div class="menu">
                                        <div class="link">
                        <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/html">Home</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zf3-book-samples">Samples</a>
                    </div>
                                        <div class="link">
                        <a href="https://olegkrivtsov.github.io/zf3-api-reference/html/">Class Reference</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zend-framework-3-book">Contribute</a>
                    </div>
                    
                </div>
            </nav>
        </div>    
    </div>
</header>    
<div id="container">
<!-- Navigation -->
<div class="navigation">
    <div class="prev-chapter">
        
        <a href="../Model_View_Controller/Models.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../Model_View_Controller/Determining_the_Correct_Model_Type.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>
        <div class="current-chapter">
        <a href="../Model_View_Controller.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">Model-View-Controller</span>
        </a>
    </div>
    </div>

﻿<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Using Zend Framework 3 Book - Chapter - Adaptive -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3933778336056438"
     data-ad-slot="4531860323"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!-- Chapter content -->
<div id="chapter_content">

<h2 id="Model_Types">4.20. Model Types</h2>
<p>In Zend Framework 3, there is no single <code>Model</code> directory for storing the model classes, as you could
assume. Instead, by convention, models are further subdivided into the following principal types, and each type is
stored in its own subdirectory (see table 4.9):</p>
<div class="table-wrapper">
<div class="table-caption">Table 4.9. Model Types and their Location</div><table>
<thead>
<tr>
<th> <em>Model Type</em>                   </th>
<th> <em>Directory</em>                                              </th>
</tr>
</thead>
<tbody>
<tr>
<td>  Entities                       </td>
<td>  <code>APP_DIR/module/Application/src/Entity</code>                  </td>
</tr>
<tr>
<td> Repositories                   </td>
<td> <code>APP_DIR/module/Application/src/Repository</code>              </td>
</tr>
<tr>
<td> Value Objects                  </td>
<td> <code>APP_DIR/module/Application/src/ValueObject</code>             </td>
</tr>
<tr>
<td> Services                       </td>
<td> <code>APP_DIR/module/Application/src/Service</code>                 </td>
</tr>
<tr>
<td> Factories                                                       </td>
<td> In <code>Factory</code> subdirectory under each model type directory.  For example, controller factories would be stored in <code>APP_DIR/module/Application/src/Controller/Factory</code>     </td>
</tr>
</tbody>
</table>
</div>
<blockquote class="notquote information" data-type="information"><p> Separation of models into different types make it easier to design your business logic domain.
 This is also called the "Domain Driven Design" (or shortly, DDD). The person who proposed DDD was Eric Evans
 in his famous book called <em>Domain-Driven Design — Tackling Complexity in the Heart of Software</em>.</p>
</blockquote><p>Below, we will describe the principal model types further.</p>
<h3 id="Entities">4.20.1. Entities</h3>
<p><em>Entities</em> are intended for storing some data and always have some <em>identifier</em> property, so you can uniquely identify the data. 
For example, a <code>User</code> entity always has a unique <code>login</code> property,
and you can identify the user by that attribute. You can change some other attributes
of the entity, like <code>firstName</code>, or <code>address</code>, but its identifier never changes.
Entities are usually stored in a database, in a file system or in any other storage.</p>
<p>Below, you can find an example a <code>User</code> entity, which represents a site visitor:</p>
<pre class="line-numbers"><code class="language-php">// The User entity represents a site visitor
class User 
{
    // Properties
    private $login;     // e.g. "admin"
    private $title;     // e.g. "Mr."
    private $firstName; // e.g. "John"
    private $lastName;  // e.g. "Doe"
    private $country;   // e.g. "USA"
    private $city;      // e.g. "Paris"
    private $postCode;  // e.g. "10543"
    private $address;   // e.g. "Jackson rd."
    
    // Behaviors    
    public function getLogin() 
    {
        return $this-&gt;login;
    }
        
    public setLogin($login) 
    {
        $this-&gt;login = $login;
    }
    
    //...
}
</code></pre>
<p>In lines 5-12, we define <code>User</code> model's properties. The best practice is to 
define the properties using the private access type, and make
them available to the caller through <em>getter</em> and <em>setter</em> public methods 
(like <code>getLogin()</code> and <code>setLogin()</code>, etc). </p>
<blockquote class="notquote information" data-type="information"><p> Model's behavior methods are not limited by getters and setters.
 You can create other methods which manipulate model's data.
 For example, you can define the <code>getFullName()</code> convenience method,
 which would return the user's full name, like "Mr. John Doe".</p>
</blockquote><h3 id="Repositories">4.20.2. Repositories</h3>
<p><em>Repositories</em> are specific models responsible for storing and retrieving entities.
For example, a <code>UserRepository</code> may represent a database table and provide methods
for retrieving <code>User</code> entities. You typically use repositories when storing entities
in a database. With repositories, you can encapsulate SQL query logic in the
single place and easily maintain and test it.</p>
<blockquote class="notquote information" data-type="information"><p> We will learn about repositories in more details in <a  href="../Database_Management_with_Doctrine_ORM.html">Database Management with Doctrine</a>, when
 talking about Doctrine library.</p>
</blockquote><h3 id="Value_Objects">4.20.3. Value Objects</h3>
<p><em>Value objects</em> are a kind of model for which the identity is not as important as for entities.
A value object is usually a small class identified by all of its attributes. 
It does not have an identifier attribute. Value objects typically have getter methods, but do not 
have setters (value objects are immutable). </p>
<p>For example, a model wrapping a money amount can be 
treated as a value object:</p>
<pre class="line-numbers"><code class="language-php">class MoneyAmount 
{
    // Properties
    private $currency;
    private $amount;
  
    // Constructor
    public function __construct($amount, $currency='USD') 
    {
        $this-&gt;amount = $amount;
        $this-&gt;currency = $currency;
    }
  
    // Gets the currency code  
    public function getCurrency() 
    {
        return $this-&gt;currency;  
    }
  
    // Gets the money amount
    public function getAmount() 
    {
        return $this-&gt;amount;
    }  
}
</code></pre>
<p>In lines 4-5 we define two properties: <code>currency</code> and <code>amount</code>. The model
has no identifier property, instead it is identified by all properties as
a whole: if you change either the <code>currency</code> or <code>amount</code>, you would have a 
different money amount object.</p>
<p>In lines 8-12 we define the constructor method, which initializes the properties.</p>
<p>In lines 15-24, we define getter methods for model's properties. Note that we
do not have setter methods (the model is immutable).</p>
<h3 id="Services">4.20.4. Services</h3>
<p><em>Service models</em> usually encapsulate some business logic functionality. 
Services usually have easily recognizable names ending with "er" suffix, like <code>FileUploader</code> or <code>UserManager</code>. </p>
<p>Below, an example of <code>Mailer</code> service is presented. It has the <code>sendMail()</code>
method which takes an <code>EmailMessage</code> value object and sends an E-mail message
using standard PHP <code>mail()</code> function:</p>
<pre class=""><code class="language-php">&lt;?php

// The Email message value object
class EmailMessage 
{  
    private $recipient;
    private $subject;
    private $text;  
  
    // Constructor
    public function __construct($recipient, $subject, $text) 
    {
        $this-&gt;recipient = $recipient;
        $this-&gt;subject = $subject;
        $this-&gt;text = $text;
    }
  
    // Getters
    public function getRecipient() 
    {
        return $this-&gt;recipient;
    }
  
    public function getSubject() 
    {
        return $this-&gt;subject;
    }
  
    public function getText() 
    {
        return $this-&gt;text;
    }
}

// The Mailer service, which can send messages by E-mail
class Mailer 
{
  
    public function sendMail($message) 
    {
        // Use PHP mail() function to send an E-mail
        if(!mail($message-&gt;getRecipient(), $message-&gt;getSubject(), 
             $message()-&gt;getText())) 
        {
            // Error sending message
            return false;
        }
    
        return true;
    }
}
</code></pre>
<blockquote class="notquote tip" data-type="tip"><p> In Zend Framework, you typically register your service models in Service Manager.</p>
</blockquote><h3 id="Factories">4.20.5. Factories</h3>
<p><em>Factories</em> are usually being designed to instantiate other models (particularly, service models). In the simplest cases you 
can create an instance of a service without any factory, just by using the <code>new</code> operator, but 
sometimes class creation logic might be rather complex. For example, services often depend on each other,
so you might need to <em>inject</em> dependencies to a service. Also, sometimes it may be required to initialize the service
right after instantiation by calling one (or several) of its methods.</p>
<p>Factory classes typically have names ending with <code>Factory</code> suffix, like 
<code>CurrencyConverterFactory</code>, <code>MailerFactory</code>, etc.</p>
<p>For a real-life example, let's imagine that we have a <code>PurchaseManager</code> service, which can process purchases of some goods, 
and that the <code>PurchaseManager</code> service uses another service named <code>CurrencyConverter</code>, which can connect to an external 
system providing money exchange rates. Let's write a factory class for the <code>PurchaseManager</code>, which would instantiate 
the service and pass it the dependency:</p>
<pre class=""><code class="language-php">&lt;?php
namespace Application\Service\Factory;

use Interop\Container\ContainerInterface;
use Zend\ServiceManager\Factory\FactoryInterface;
use Application\Service\CurrencyConverter;
use Application\Service\PurchaseManager;

/**
 * This is the factory for PurchaseManager service. Its purpose is to instantiate the 
 * service and inject its dependencies.
 */
class PurchaseManagerFactory implements FactoryInterface
{
    public function __invoke(ContainerInterface $container, 
                $requestedName, array $options = null)
    {
        // Get CurrencyConverter service from the service manager.
        $currencyConverter = $container-&gt;get(CurrencyConverter::class);
        
        // Instantiate the service and inject dependencies.
        return new PurchaseManager($currencyConverter);
    }
}
</code></pre>
<p>In the code above we have the <code>PurchaseManagerFactory</code> class which implements the 
<code>Zend\ServiceManager\Factory\FactoryInterface</code> interface. The factory class has the <code>__invoke()</code> method
whose goal is to instantiate the object. This method has the <code>$container</code> argument which is the service
manager. You can use <code>$container</code> to retrieve services from service manager and pass them to the constructor 
method of the service being instantiated.</p>
        
</div>

<!-- Ads -->
<div id="ads-chapter-bottom">
<div>
﻿<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Using Zend Framework 3 Chapter - Bottom - Adaptive -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3933778336056438"
     data-ad-slot="1546211126"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
</div>
    
<!-- Navigation -->
<div class="navigation">
        <div class="current-chapter">
        <a href="../Model_View_Controller.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">Model-View-Controller</span>
        </a>
    </div>
        <div class="prev-chapter">
        
        <a href="../Model_View_Controller/Models.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../Model_View_Controller/Determining_the_Correct_Model_Type.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>        
</div>

<div id="disqus_thread"></div>

        
</div>
<footer>
    <div class="footer">
        <div class="footer-body">
            <div class="copyright">
                Copyright &copy; 2018 by Oleg Krivtsov            </div>
            <div class="footer-menu">
                                <div class="footer-link">
                    <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/legal/terms-and-conditions.html">Terms &amp; Conditions</a>
                </div>
                                <div class="footer-link">
                    <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/legal/copyright-policy.html">Copyright Policy</a>
                </div>
                                <div class="footer-link">
                    <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/legal/privacy-policy.html">Privacy Policy</a>
                </div>
                            </div>
            <div class="generated-by">
                Generated using <a href="https://github.com/olegkrivtsov/openbook">OpenBook</a>
            </div>
        </div>    
    </div>
</footer>

<a href="#0" class="cd-top">Top</a>

<script src="../../assets/js/jquery.min.js"></script>
<script src="../../assets/js/loadCSS.js"></script>
<script src="../../assets/js/popup.js"></script>

<script src="../../assets/js/prism.js"></script>

<script>
var disqus_config = function () {
this.page.url = window.location.href; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = ''; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//using-zend-framework-3-book.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
<script>
loadCSS("../../assets/css/prism.css");
</script>

<script>
jQuery(document).ready(function($){
    // browser window scroll (in pixels) after which the "back to top" link is shown
    var offset = 300,
    //browser window scroll (in pixels) after which the "back to top" link opacity is reduced
    offset_opacity = 1200,
    //duration of the top scrolling animation (in ms)
    scroll_top_duration = 700,
    //grab the "back to top" link
    $back_to_top = $('.cd-top');

    //hide or show the "back to top" link
    $(window).scroll(function(){
            ( $(this).scrollTop() > offset ) ? $back_to_top.addClass('cd-is-visible') : $back_to_top.removeClass('cd-is-visible cd-fade-out');
            if( $(this).scrollTop() > offset_opacity ) { 
                    $back_to_top.addClass('cd-fade-out');
            }
    });

    //smooth scroll to top
    $back_to_top.on('click', function(event){
            event.preventDefault();
            $('body,html').animate({
                    scrollTop: 0 ,
                    }, scroll_top_duration
            );
    });

});
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-80824388-1', 'auto');
  ga('send', 'pageview');

</script>

</body>
</html>    

