<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="description" content="A free, read-frendly and open-source book on ZF3">
<meta name="keywords" content="zend framework,book,beginner,free">
<meta name="author" content="2019 by Oleg Krivtsov">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="../../favicon.ico" rel="shortcut icon" type="image/ico" />
<link href="../../assets/css/style.css" type="text/css" rel="stylesheet" />
<title>Profiling &ndash; Using Zend Framework 3</title>
</head>
<body>
<header>
    <div class="header">
        <div class="header-body">
            <div class="book-title">
                <a href="../../index.html">Using Zend Framework 3</a>
            </div>
            <div class="book-subtitle">
                A free, read-frendly and open-source book on ZF3            </div>
            <nav>
                <div class="menu">
                                        <div class="link">
                        <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/html">Home</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zf3-book-samples">Samples</a>
                    </div>
                                        <div class="link">
                        <a href="https://olegkrivtsov.github.io/zf3-api-reference/html/">Class Reference</a>
                    </div>
                                        <div class="link">
                        <a href="https://github.com/olegkrivtsov/using-zend-framework-3-book">Contribute</a>
                    </div>
                    
                </div>
            </nav>
        </div>    
    </div>
</header>    
<div id="container">
<!-- Navigation -->
<div class="navigation">
    <div class="prev-chapter">
        
        <a href="../Appendix_B__Introduction_to_PHP_Development_in_NetBeans_IDE/Debugging_Options.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../Appendix_B__Introduction_to_PHP_Development_in_NetBeans_IDE/Summary.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>
        <div class="current-chapter">
        <a href="../Appendix_B__Introduction_to_PHP_Development_in_NetBeans_IDE.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">Appendix B. Introduction to PHP Development in NetBeans IDE</span>
        </a>
    </div>
    </div>

ï»¿<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Using Zend Framework 3 Book - Chapter - Adaptive -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3933778336056438"
     data-ad-slot="4531860323"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!-- Chapter content -->
<div id="chapter_content">

<h2 id="Profiling"> Profiling</h2>
<p>When your site is ready and working, you are typically interested in making it as fast and 
performing as possible. XDebug provides you with an ability to <em>profile</em> your website. Profiling means determining
which class methods (or functions) spend what time to execute. This allows you to determine 
the "bottle neck" places in your code and address the performance issues. </p>
<p>For each HTTP request, the XDebug extension measures the amount of time a function executes, 
and writes the profiling information to a file. Typically, the profiling info files are placed 
into the system temporary directory (in Linux, to <em>/tmp</em> directory) and have names like 
<code>xdebug.out.&lt;timestamp&gt;</code>, where the <code>&lt;timestamp&gt;</code> placeholder is the timestamp of the HTTP request.
All you have to do is to open a profiling file and analyze it.</p>
<blockquote class="notquote warning" data-type="warning"><p> To enable XDebug profiler, you should set the following XDebug configuration parameter in your <em>xdebug.ini</em> file:</p>
<p> <code>xdebug.profiler_enable = 1</code></p>
</blockquote><p>Unfortunately, NetBeans for PHP does not have an embedded tool for visualizing the profiling 
results. That's why you need to install a third-party visualizer tool. Below, we will provide
instructions on how to install a simple web-based tool named <a target="_blank" href="https://github.com/jokkedk/webgrind">Webgrind</a>. 
Webgrind can work on any platform, because this tool itself is written in PHP.</p>
<p>Webgrind's installation is very straightforward.</p>
<p>First, you need to download webgrind from its project page and unpack it to some folder.
In Linux, you can do this with the following commands:</p>
<pre class=""><code class="language-bash">$ cd ~

$ wget https://github.com/jokkedk/webgrind/archive/master.zip

$ unzip master.zip
</code></pre>
<p>The commands above will change your working directory to your
home directory, then will download the Webgrind archive from the Internet, and then unpack
the archive.</p>
<p>Next, you need to tell the Apache web server where to find Webgrind files. This means
you need to configure a separate virtual host. We have already learned about virtual 
hosts in <a  href="../Appendix_A__Configuring_Web_Development_Environment.html">Appendix A. Configuring Web Development Environment</a>. Do not forget to restart Apache web server after
you have configured the virtual host.</p>
<p>Finally, open Webgrind in your browser by navigating to the URL of your 
Webgrind install. For example, if you configured the virtual host to listen on
port 8080, enter "http://localhost:8080" in your browser's navigation bar and press Enter.
The Webgrind web page should appear (see figure B.13):</p>
<p><span class="image-wrapper">
<a target="_blank" href="../images/netbeans/webgrind.png">
<img src="../images/netbeans/webgrind.png" alt="Figure B.13. Webgrind Output Page" /></a>
<span class="image-caption">Figure B.13. Webgrind Output Page</span>
</span>
</p>
<p>At the top of the Webgrind page, you can select the percentage of the "heaviest" function calls to show (figure B.14).
By default, it is set to 90%. Setting this to a lower percentage will hide the functions called
less often.</p>
<p><span class="image-wrapper">
<a target="_blank" href="../images/netbeans/webgrind-select.png">
<img src="../images/netbeans/webgrind-select.png" alt="Figure B.14. Webgrind Select" /></a>
<span class="image-caption">Figure B.14. Webgrind Select</span>
</span>
</p>
<p>The drop-down list to the right of percent field allows to select the profiling data file to analyze.
By default, it is set to "Auto (newest)", which forces Webgrind to use the file with the most recent
timestamp. You may need to select another file, for example, if your web pages use asynchronous AJAX
requests.</p>
<p>The right-most drop-down list allows to set the units which should be used for measuring the data.
Possible options are: percent (default), milliseconds and microseconds.</p>
<p>When you have selected the percentage, file name and units, click the <em>Update</em> button to let Webgrind
to visualize the data for you (the calculation may take a few seconds). As the calculation finishes, 
you should be able to see the table of function calls, sorted in descending order by function "weight". 
The heaviest functions will be displayed at the top. </p>
<p>The table has the following columns:</p>
<ul>
<li><p>The first column (<em>Function</em>), displays the class name followed by method name (in case of a method call) or 
function name (in case of a regular function).</p>
</li>
<li><p>The second column contains the "paragraph" icons, which can be clicked to open the corresponding PHP 
source file that function is defined in the web browser. </p>
</li>
<li><p><em>Invocation Count</em> column displays the number of times the function was called.</p>
</li>
<li><p><em>Total Self Cost</em> column shows the total time it took to execute the built-in PHP code in 
 the function (excluding the time spent on executing other non-standard functions).</p>
</li>
<li><p><em>Total Inclusive Cost</em> column contains the total execution time for the function, 
including built-in PHP code and any other user functions called.</p>
</li>
</ul>
<p>Clicking a column header allows to sort data in ascending or descending order.</p>
<p>You can click the triangle icon next to a function name to expand a list of function 
invocations. This list allows you to see who called this function and what the amount
of time spent is, and contains the following columns:</p>
<ul>
<li><em>Calls</em> is the "parent" functions or class methods invoking this (child) function;</li>
<li><em>Total Call Cost</em> is the total time executing this function, when called from the parent function;</li>
<li><em>Count</em> - number of times the parent calls the child function.</li>
</ul>
<p>The coloured bar at the top of the page displays the contribution of different function types:</p>
<ul>
<li><em>Blue</em> denotes PHP internal (built-in) functions;</li>
<li><em>Lavender</em> is time taken to include (or require) PHP files;</li>
<li><em>Green</em> shows the contribution of your own class methods; </li>
<li><em>Orange</em> denotes time taken on traditional "procedural" functions (functions that are not part of a PHP classes).</li>
</ul>
<blockquote class="notquote tip" data-type="tip"><p> Please note that the profiler creates a new data file in your <em>/tmp</em> directory for each HTTP request to your website.
 This may cause disk space exhaustion, which can be fixed only by rebooting your system.
 So, when you've finished profiling your application, it is recommended to disable the profiling
 by editing the <em>php.ini</em> file, commenting the <code>xdebug.profiler_enable</code> parameter as follows,
 and then restarting the Apache web server.</p>
<p> <code>;xdebug.profiler_enable = 0</code></p>
</blockquote>        
</div>

<!-- Ads -->
<div id="ads-chapter-bottom">
<div>
ï»¿<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Using Zend Framework 3 Chapter - Bottom - Adaptive -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3933778336056438"
     data-ad-slot="1546211126"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
</div>
    
<!-- Navigation -->
<div class="navigation">
        <div class="current-chapter">
        <a href="../Appendix_B__Introduction_to_PHP_Development_in_NetBeans_IDE.html">
            <img alt="Contents" src="../../assets/images/upload.png"><span class="nav-btn-text">Appendix B. Introduction to PHP Development in NetBeans IDE</span>
        </a>
    </div>
        <div class="prev-chapter">
        
        <a href="../Appendix_B__Introduction_to_PHP_Development_in_NetBeans_IDE/Debugging_Options.html">
            <img alt="Previous Chapter" src="../../assets/images/left.png"><span class="nav-btn-text">Previous</span>
        </a>
        </div>    
    <div class="contents">
        <a href="../toc.html">
            <img alt="Contents" src="../../assets/images/book.png"><span class="nav-btn-text">Contents</span>
        </a>
    </div>
    <div class="next-chapter">
                <a href="../Appendix_B__Introduction_to_PHP_Development_in_NetBeans_IDE/Summary.html">
            <span class="nav-btn-text">Next</span><img alt="Next Chapter" src="../../assets/images/right.png">
        </a>
            </div>        
</div>

<div id="disqus_thread"></div>

        
</div>
<footer>
    <div class="footer">
        <div class="footer-body">
            <div class="copyright">
                Copyright &copy; 2019 by Oleg Krivtsov            </div>
            <div class="footer-menu">
                                <div class="footer-link">
                    <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/legal/terms-and-conditions.html">Terms &amp; Conditions</a>
                </div>
                                <div class="footer-link">
                    <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/legal/copyright-policy.html">Copyright Policy</a>
                </div>
                                <div class="footer-link">
                    <a href="https://olegkrivtsov.github.io/using-zend-framework-3-book/legal/privacy-policy.html">Privacy Policy</a>
                </div>
                            </div>
            <div class="generated-by">
                Generated using <a href="https://github.com/olegkrivtsov/openbook">OpenBook</a>
            </div>
        </div>    
    </div>
</footer>

<a href="#0" class="cd-top">Top</a>

<script src="../../assets/js/jquery.min.js"></script>
<script src="../../assets/js/loadCSS.js"></script>
<script src="../../assets/js/popup.js"></script>

<script src="../../assets/js/prism.js"></script>

<script>
var disqus_config = function () {
this.page.url = window.location.href; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = ''; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//using-zend-framework-3-book.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
<script>
loadCSS("../../assets/css/prism.css");
</script>

<script>
jQuery(document).ready(function($){
    // browser window scroll (in pixels) after which the "back to top" link is shown
    var offset = 300,
    //browser window scroll (in pixels) after which the "back to top" link opacity is reduced
    offset_opacity = 1200,
    //duration of the top scrolling animation (in ms)
    scroll_top_duration = 700,
    //grab the "back to top" link
    $back_to_top = $('.cd-top');

    //hide or show the "back to top" link
    $(window).scroll(function(){
            ( $(this).scrollTop() > offset ) ? $back_to_top.addClass('cd-is-visible') : $back_to_top.removeClass('cd-is-visible cd-fade-out');
            if( $(this).scrollTop() > offset_opacity ) { 
                    $back_to_top.addClass('cd-fade-out');
            }
    });

    //smooth scroll to top
    $back_to_top.on('click', function(event){
            event.preventDefault();
            $('body,html').animate({
                    scrollTop: 0 ,
                    }, scroll_top_duration
            );
    });

});
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-80824388-1', 'auto');
  ga('send', 'pageview');

</script>

</body>
</html>    

